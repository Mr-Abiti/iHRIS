(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["fhir-primary","fhir-name"],{"08e0":function(t,e){const i=-285019,a=1723856,s=1721426;function r(t,e){return t-e*Math.floor(t/e)}function n(t=1){return t%4===0&&(t%100!==0||t%400===0)}function o(t,e,i,a){return a+365+365*(t-1)+Math.floor(t/4)+30*e+i-31}function l(t,e=s,i=n){const a=12,o=[0,31,28,31,30,31,30,31,31,30,31,30,31],l=r(t-e,730485),c=r(t-e,146097),u=r(c,36524),d=r(u,1461);let h=r(d,365)+365*Math.floor(d/1460);const p=Math.floor(d/1095),f=400*Math.floor((t-e)/146097)+100*Math.floor(c/36524)+4*Math.floor(u/1461)+Math.floor(d/365)-Math.floor(d/1460)-Math.floor(l/730484),m=f+1,v=Math.floor((364+p-h)/306);let y=v*(Math.floor(h/31)+1)+(1-v)*(Math.floor((5*(h-p)+13)/153)+1);h+=1-Math.floor(l/730484);let b=h;if(0===u&&0===h&&0!==c)y=12,b=31;else{o[2]=i(m)?29:28;for(let t=1;t<=a;t+=1){if(h<=o[t]){b=h;break}h-=o[t]}}return{year:m,month:y,day:b}}function c(t,e=a,s=i){return t>=e+365?e:s}function u(t=1,e=1,i=1,a=s){const r=Math.floor(t/4)-Math.floor((t-1)/4)-Math.floor(t/100)+Math.floor((t-1)/100)+Math.floor(t/400)-Math.floor((t-1)/400),n=Math.floor((14-e)/12),o=31*n*(e-1)+(1-n)*(59+r+30*(e-3)+Math.floor((3*e-7)/5))+i-1,l=a+365*(t-1)+Math.floor((t-1)/4)-Math.floor((t-1)/100)+Math.floor((t-1)/400)+o;return l}function d(t,e=a){const i=r(t-e,1461),s=r(i,365)+365*Math.floor(i/1460),n=4*Math.floor((t-e)/1461)+Math.floor(i/365)-Math.floor(i/1460),o=Math.floor(s/30)+1,l=r(s,30)+1;return{year:n,month:o,day:l}}function h(t=1,e=1,i=1,s=a){return l(o(t,e,i,s))}function p(t=1,e=1,i=1){const a=u(t,e,i);return d(a,c(a))}t.exports={isGregorianLeap:n,gj:u,je:d,eg:h,ge:p,AA:i,AM:a}},1131:function(t,e,i){"use strict";i.r(e);var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("ihris-element",{attrs:{edit:t.edit,loading:t.loading},scopedSlots:t._u([{key:"form",fn:function(){return[i("v-select",{attrs:{loading:t.loading,label:t.$t("App.fhir-code."+t.display),items:t.items.filter((function(t){return!t.code.includes("(deactivated)")})),outlined:"","hide-details":"auto","error-messages":t.errors,"item-text":"display","item-value":"code",disabled:t.disabled,rules:t.rules,dense:""},on:{change:function(e){t.errors=[]}},scopedSlots:t._u([{key:"label",fn:function(){return[t._v(t._s(t.$t("App.fhir-code."+t.display))+" "),t.required?i("span",{staticClass:"red--text font-weight-bold"},[t._v("*")]):t._e()]},proxy:!0}]),model:{value:t.value,callback:function(e){t.value=e},expression:"value"}})]},proxy:!0},{key:"header",fn:function(){return[t._v(" "+t._s(t.$t("App.fhir-code."+t.display))+" ")]},proxy:!0},{key:"value",fn:function(){return[t._v(" "+t._s(t.displayValue)+" ")]},proxy:!0}])})},s=[],r=(i("7db0"),i("b287")),n={name:"fhir-code",props:["field","min","max","base-min","base-max","label","binding","slotProps","path","edit","sliceName","readOnlyIfSet","constraints"],components:{IhrisElement:r["a"]},data:function(){return{value:"",loading:!0,errors:[],items:[],source:{path:"",data:{},binding:this.binding},disabled:!1,lockWatch:!1}},created:function(){this.setupData()},watch:{slotProps:{handler:function(){this.lockWatch||this.setupData()},deep:!0}},methods:{setupData:function(){var t=this;if(this.slotProps&&this.slotProps.source){if(this.source={path:this.slotProps.source.path+"."+this.field,data:{}},this.slotProps.source.fromArray)this.source.data=this.slotProps.source.data,this.value=this.source.data,this.lockWatch=!0;else{var e=this.$fhirutils.pathFieldExpression(this.field);this.source.data=this.$fhirpath.evaluate(this.slotProps.source.data,e),1==this.source.data.length&&(this.value=this.source.data[0],this.lockWatch=!0)}this.disabled=this.readOnlyIfSet&&!!this.value}var i=this.binding||this.slotProps.source.binding;this.$fhirutils.expand(i).then((function(e){t.items=e,t.loading=!1})).catch((function(e){console.log(e),t.errors.push(e.message),t.loading=!1}))}},computed:{index:function(){return this.slotProps&&this.slotProps.input?this.slotProps.input.index:void 0},display:function(){return this.slotProps&&this.slotProps.input?this.slotProps.input.label:this.label},displayValue:function(){var t=this,e=this.items.find((function(e){return e.code===t.value}));return e?e.display:""},required:function(){return(this.index||0)<this.min},rules:function(){var t=this;return this.required?[function(e){return!!e||t.display+" is required"}]:[]}}},o=n,l=i("2877"),c=i("6544"),u=i.n(c),d=i("b974"),h=Object(l["a"])(o,a,s,!1,null,null,null);e["default"]=h.exports;u()(h,{VSelect:d["a"]})},"309c":function(t,e,i){"use strict";i.r(e);var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[t._t("default",null,{source:t.source})],2)},s=[],r={name:"fhir-codeable-concept",props:["field","slotProps","sliceName","min","max","base-min","base-max","label","path","binding","edit","constraints"],data:function(){return{source:{path:"",data:{},binding:this.binding},errors:[]}},created:function(){this.setupData()},watch:{slotProps:{handler:function(){this.setupData()},deep:!0}},methods:{setupData:function(){if(this.slotProps&&this.slotProps.source)if(this.source={path:this.slotProps.source.path+"."+this.field,data:{},binding:this.binding},this.slotProps.source.fromArray)this.source.data=this.slotProps.source.data;else{var t=this.$fhirutils.pathFieldExpression(this.field);this.source.data=this.$fhirpath.evaluate(this.slotProps.source.data,t)}}},computed:{display:function(){return this.slotProps&&this.slotProps.input?this.slotProps.input.label:this.label}}},n=r,o=i("2877"),l=Object(o["a"])(n,a,s,!1,null,null,null);e["default"]=l.exports},"39e1":function(t,e,i){"use strict";i.r(e);var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return t.edit?t._e():i("v-container",{staticClass:"my-3"},[i("v-data-table",{staticClass:"elevation-1",attrs:{headers:t.translatedHeader,items:t.items,"item-key":"id","items-per-page":5,loading:t.loading,dense:"","footer-props":{"items-per-page-text":t.$t("App.ihris-search.tableText"),"items-per-page-options":[5,10,20,50]}},scopedSlots:t._u([{key:"top",fn:function(){return[i("v-toolbar",{attrs:{flat:"",color:"white"}},[i("v-toolbar-title",[t._v(" "+t._s(t.$t("App.ihris-secondary."+t.title))+" ")]),i("v-spacer"),t._l(t.topActions,(function(e){return i("v-btn",{key:e.text,attrs:{to:t.setupLink(e.link,{}),color:e.class,small:""}},[t._v(" "+t._s(t.$t("App.ihris-secondary."+e.text))+" ")])}))],2)]},proxy:!0},{key:"item._action",fn:function(e){var a=e.item;return t._l(a.actions,(function(e){return i("v-btn",{key:e.text,attrs:{to:t.setupLink(e.link,a),color:e.class,small:"",rounded:""}},[t._v(" "+t._s(e.text)+" ")])}))}}],null,!1,4170917870)})],1)},s=[],r=(i("a623"),i("4de4"),i("7db0"),i("c975"),i("a15b"),i("d81d"),i("d3b7"),i("ac1f"),i("3ca3"),i("5319"),i("1276"),i("9911"),i("ddb0"),i("b85c")),n=(i("96cf"),i("1da1")),o=function(t){return!!t&&t.constructor===Object},l={name:"ihris-secondary",props:["title","field","profile","slotProps","link-id","link-field","search-field","edit","columns","actions"],data:function(){return{source:{data:{},path:this.field},empty:!0,items:[],loading:!0,topActions:[],translatedHeader:[]}},mounted:function(){this.setupData()},watch:{},methods:{setupData:function(){var t,e=this;if(this.translatedHeader=this.columns.map((function(t){return{text:e.$t("App.ihris-secondary.table.".concat(t.text)),value:t.value}})),2===this.searchField.split(":").length){var i=this.searchField.split(":")[0];t="fhir/"+i+"?_id="+this.linkId+"&_include="+this.searchField}else{t="/fhir/"+this.field;var a=[];this.profile&&a.push("_profile="+this.profile),this.searchField?a.push(this.searchField+"="+this.linkId):a.push(this.linkField.substring(this.linkField.indexOf(".")+1)+"="+this.linkId),t+="?"+a.join("&")}this.items=[],this.loading=!0,this.addItems(t)},addItems:function(t){var e=this;fetch(t).then((function(i){200===i.status?i.json().then(function(){var t=Object(n["a"])(regeneratorRuntime.mark((function t(i){var a,s,n,o,l,c,u,d,h,p,f,m,v,y,b,g,x;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!(i.entry&&i.entry.length>0)){t.next=52;break}a=Object(r["a"])(i.entry),t.prev=2,a.s();case 4:if((s=a.n()).done){t.next=42;break}if(n=s.value,2!==e.searchField.split(":").length||n.resource.resourceType!==e.searchField.split(":")[0]){t.next=8;break}return t.abrupt("continue",40);case 8:o={id:n.resource.id},l=Object(r["a"])(e.columns),t.prev=10,l.s();case 12:if((c=l.n()).done){t.next=28;break}if(u=c.value,"_action"!==u.value){t.next=16;break}return t.abrupt("continue",26);case 16:return t.prev=16,d=e.$fhirpath.evaluate(n.resource,u.value),t.next=20,e.processContent(d);case 20:o[u.value]=t.sent,t.next=26;break;case 23:t.prev=23,t.t0=t["catch"](16),console.log(t.t0);case 26:t.next=12;break;case 28:t.next=33;break;case 30:t.prev=30,t.t1=t["catch"](10),l.e(t.t1);case 33:return t.prev=33,l.f(),t.finish(33);case 36:o.actions||(o.actions=[]),h=Object(r["a"])(e.actions);try{for(h.s();!(p=h.n()).done;)f=p.value,f.row?f.condition?(m=e.$fhirpath.evaluate(n.resource,f.condition),m.every((function(t){return t}))&&o.actions.push(f)):o.actions.push(f):f.condition?(v=e.$fhirpath.evaluate(n.resource,f.condition),f.hasOwnProperty("meets")?f.meets=f.meets&&v.every((function(t){return t})):f.meets=v.every((function(t){return t}))):f.meets=!0}catch(k){h.e(k)}finally{h.f()}e.items.push(o);case 40:t.next=4;break;case 42:t.next=47;break;case 44:t.prev=44,t.t2=t["catch"](2),a.e(t.t2);case 47:return t.prev=47,a.f(),t.finish(47);case 50:t.next=54;break;case 52:y=Object(r["a"])(e.actions);try{for(y.s();!(b=y.n()).done;)g=b.value,g.row||(g.meets=g.emptyDisplay)}catch(k){y.e(k)}finally{y.f()}case 54:e.topActions=e.actions.filter((function(t){return!t.row&&t.meets})),i.link?(x=i.link.find((function(t){return"next"===t.relation})),x?e.addItems(x.url):e.loading=!1):e.loading=!1;case 56:case"end":return t.stop()}}),t,null,[[2,44,47,50],[10,30,33,36],[16,23]])})));return function(e){return t.apply(this,arguments)}}()).catch((function(t){e.loading=!1,console.log(t)})):(e.loading=!1,console.log("Unable to fetch",t,i.status))})).catch((function(t){e.loading=!1,console.log(t)}))},processContent:function(){var t=Object(n["a"])(regeneratorRuntime.mark((function t(e){var i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!Array.isArray(e)){t.next=7;break}return t.next=3,Promise.all(e.map(this.processContent));case 3:return i=t.sent,t.abrupt("return",i.join(" "));case 7:if(!o(e)){t.next=32;break}if(!e.code||!e.system){t.next=14;break}return t.next=11,this.$fhirutils.codeLookup(e.system,e.code);case 11:return t.abrupt("return",t.sent);case 14:if(!e.display){t.next=18;break}return t.abrupt("return",e.display);case 18:if(!e.code){t.next=22;break}return t.abrupt("return",e.code);case 22:if(!e.reference){t.next=28;break}return t.next=25,this.$fhirutils.resourceLookup(e.reference);case 25:return t.abrupt("return",t.sent);case 28:return console.log("Unable to process content:",e),t.abrupt("return","Unknown");case 30:t.next=33;break;case 32:return t.abrupt("return",e);case 33:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}(),setupLink:function(t,e){return t.replace("ITEMID",e.id).replace("FHIRID",this.linkId)}}},c=l,u=(i("e96c"),i("2877")),d=i("6544"),h=i.n(d),p=i("8336"),f=i("a523"),m=i("8fea"),v=i("2fa4"),y=i("71d9"),b=i("2a7f"),g=Object(u["a"])(c,a,s,!1,null,null,null);e["default"]=g.exports;h()(g,{VBtn:p["a"],VContainer:f["a"],VDataTable:m["a"],VSpacer:v["a"],VToolbar:y["a"],VToolbarTitle:b["a"]})},"3d3d":function(t,e,i){},"45dd":function(t,e,i){"use strict";i.r(e);var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("ihris-element",{attrs:{edit:t.edit,loading:!1},scopedSlots:t._u([{key:"form",fn:function(){return[i("v-menu",{ref:"menu",attrs:{"close-on-content-click":!1,transition:"scale-transition","offset-y":"","min-width":"290px"},scopedSlots:t._u([{key:"activator",fn:function(e){var a=e.on;return[i("v-text-field",t._g({attrs:{label:t.$t("App.fhir-date-time."+t.label),"prepend-inner-icon":"mdi-calendar",readonly:"",outlined:"","hide-details":"auto",rules:t.rules,"error-messages":t.errors,dense:""},scopedSlots:t._u([{key:"label",fn:function(){return[t._v(t._s(t.$t("App.fhir-date-time."+t.label))+" "),t.required?i("span",{staticClass:"red--text font-weight-bold"},[t._v("*")]):t._e()]},proxy:!0}],null,!0),model:{value:t.displayValue,callback:function(e){t.displayValue=e},expression:"displayValue"}},a))]}}]),model:{value:t.menu,callback:function(e){t.menu=e},expression:"menu"}},[t.isEthiopian?i("v-container",{staticClass:"ma-0 pa-0"},[i("v-row",{attrs:{"no-gutters":""}},[i("v-card",{attrs:{"min-width":"300px"}},[i("v-card-title",{staticClass:"primary white--text"},[t._v(" Ethiopian Calendar"),i("v-spacer"),i("v-btn",{staticClass:"white--text",attrs:{dark:"",icon:"",group:"",small:""},on:{click:function(e){t.showGregorian=!t.showGregorian}}},[t.showGregorian?i("v-icon",[t._v("mdi-calendar")]):i("v-icon",[t._v("mdi-calendar-multiple")])],1)],1),"year"===t.pickerType?i("v-card-text",[i("br"),i("v-text-field",{attrs:{clearable:"",type:"number",disabled:t.disabled,label:t.label,min:t.minYear,max:t.maxYear,rules:t.rules,"error-messages":t.errors,dense:""},on:{change:function(e){t.errors=[]}},model:{value:t.etValue,callback:function(e){t.etValue=e},expression:"etValue"}})],1):i("v-ethiopian-date-picker",{ref:"etPicker",attrs:{label:"Ethiopian",color:"secondary",landscape:t.$vuetify.breakpoint.smAndUp,max:t.maxValueETDateTime,min:t.minValueETDateTime,type:t.pickerType,disabled:t.disabled,locale:"am"},on:{change:t.save},model:{value:t.etValue,callback:function(e){t.etValue=e},expression:"etValue"}})],1),t.showGregorian?i("v-card",{attrs:{"min-width":"300px"}},[i("v-card-title",{staticClass:"primary white--text"},[t._v(" Gregorian Calendar"),i("v-spacer"),i("v-btn",{staticClass:"white--text",attrs:{dark:"",icon:"",group:"",small:""},on:{click:function(e){t.showGregorian=!1}}},[i("v-icon",[t._v("mdi-close")])],1)],1),"year"===t.pickerType?i("v-card-text",[i("br"),i("v-text-field",{attrs:{clearable:"",type:"number",disabled:t.disabled,label:t.label,min:t.minYear,max:t.maxYear,rules:t.rules,"error-messages":t.errors,dense:""},on:{change:function(e){t.errors=[]}},model:{value:t.value,callback:function(e){t.value=e},expression:"value"}})],1):i("v-date-picker",{ref:"gPicker",attrs:{color:"secondary",landscape:t.$vuetify.breakpoint.smAndUp,max:t.dateValueMax,min:t.dateValueMin,type:t.pickerType,disabled:t.disabled},on:{change:t.save},model:{value:t.value,callback:function(e){t.value=e},expression:"value"}})],1):t._e()],1)],1):"year"===t.pickerType?i("v-card",{attrs:{"min-width":"300px"}},[i("v-card-text",[i("br"),i("v-text-field",{attrs:{type:"number",disabled:t.disabled,label:t.label,min:t.minYear,max:t.maxYear,rules:t.rules,"error-messages":t.errors,dense:""},on:{change:function(e){t.errors=[]}},model:{value:t.value,callback:function(e){t.value=e},expression:"value"}})],1)],1):i("v-date-picker",{ref:"picker",attrs:{color:"secondary",landscape:t.$vuetify.breakpoint.smAndUp,max:t.dateValueMax,min:t.dateValueMin,type:t.pickerType,disabled:t.disabled},on:{change:t.save},model:{value:t.value,callback:function(e){t.value=e},expression:"value"}})],1)]},proxy:!0},{key:"header",fn:function(){return[t._v(" "+t._s(t.$t("App.fhir-date-time."+t.label))+" ")]},proxy:!0},{key:"value",fn:function(){return[t._v(" "+t._s(t.displayValue)+" ")]},proxy:!0}])})},s=[],r=(i("d81d"),i("a9e3"),i("d3b7"),i("ac1f"),i("25f0"),i("466d"),i("4d90"),i("1276"),i("3835")),n=i("b287"),o=i("c472"),l=i("08e0"),c=i.n(l),u={name:"fhir-date-time",props:["field","min","max","base-min","base-max","label","slotProps","path","edit","sliceName","minValueDateTime","maxValueDateTime","minValueQuantity","maxValueQuantity","displayType","readOnlyIfSet","calendar","constraints"],components:{IhrisElement:n["a"],VEthiopianDatePicker:o["a"]},data:function(){return{value:null,etValue:null,menu:!1,source:{path:"",data:{}},qField:"valueDateTime",pickerType:"date",disabled:!1,showGregorian:!1,errors:[],lockWatch:!1}},created:function(){this.setupData()},computed:{dateValueMax:function(){if(this.maxValueQuantity){var t=this.convertQuantity(this.maxValueQuantity,"add");if(t)return t}if(this.maxValueDate)return this.maxValueDate},dateValueMin:function(){if(this.minValueQuantity){var t=this.convertQuantity(this.minValueQuantity,"subtract");if(t)return t}else if(this.minValueDate)return this.minValueDate},minYear:function(){return this.dateValueMin?this.dateValueMin.substring(0,4):void 0},maxYear:function(){return this.dateValueMax?this.dateValueMax.substring(0,4):void 0},minYearET:function(){return this.minValueETDate?this.minValueETDate.substring(0,4):void 0},maxYearET:function(){return this.maxValueETDate?this.maxValueETDate.substring(0,4):void 0},isEthiopian:function(){return"Ethiopian"===this.calendar},minValueETDateTime:function(){return this.dateValueMin?this.convertGE(this.dateValueMin):null},maxValueETDateTime:function(){return this.dateValueMax?this.convertGE(this.dateValueMax):null},displayValue:function(){return this.isEthiopian?this.value&&"Ethiopian: "+this.etValue+" Gregorian: "+this.value:this.value},index:function(){return this.slotProps&&this.slotProps.input?this.slotProps.input.index:void 0},required:function(){return(this.index||0)<this.min},rules:function(){var t=this;return this.required?[function(e){return!!e||t.label+" is required"}]:[]}},watch:{menu:function(t){var e=this;this.isEthiopian?!this.value&&t&&setTimeout((function(){return e.$refs.etPicker.activePicker="YEAR"})):!this.value&&t&&setTimeout((function(){return e.$refs.picker.activePicker="YEAR"}))},showGregorian:function(t){var e=this;!this.value&&t&&setTimeout((function(){return e.$refs.gPicker.activePicker="YEAR"}))},slotProps:{handler:function(){this.lockWatch||this.setupData()},deep:!0},value:function(t){t?"year"===this.pickerType?4===t.length&&(this.etValue=this.convertGE(t)):this.etValue=this.convertGE(t):this.etValue=t},etValue:function(t){t?"year"===this.pickerType?4===t.length&&(this.value=this.convertEG(t)):this.value=this.convertEG(t):this.value=t}},methods:{convertQuantity:function(t,e){var i={a:"years",mo:"months",wk:"weeks",d:"days"},a=/(-?\d+)([a-z]{1,3})/,s=t.match(a);if(3===s.length)try{var r=s[1],n=i[s[2]];return"subtract"===e?this.$moment(this.$moment().subtract(r,n)).format("YYYY-MM-DD"):this.$moment(this.$moment().add(r,n)).format("YYYY-MM-DD")}catch(o){console.log("Failed to get date from quantity",o)}},convertGE:function(t){if(!t)return t;var e=t.split("-").map(Number),i=Object(r["a"])(e,3),a=i[0],s=i[1],n=i[2];if("year"===this.pickerType){var o=c.a.ge(a,s||6,n||1);return o.year.toString().padStart(4,"0")}var l=c.a.ge(a,s||1,n||1);return l.year.toString().padStart(4,"0")+"-"+l.month.toString().padStart(2,"0")+"-"+l.day.toString().padStart(2,"0")},convertEG:function(t){if(!t)return t;var e=t.split("-").map(Number),i=Object(r["a"])(e,3),a=i[0],s=i[1],n=i[2];if("year"===this.pickerType){var o=c.a.eg(a,s||6,n||1);return o.year.toString().padStart(4,"0")}var l=c.a.eg(a,s||1,n||1);return l.year.toString().padStart(4,"0")+"-"+l.month.toString().padStart(2,"0")+"-"+l.day.toString().padStart(2,"0")},setupData:function(){if(this.displayType&&(this.pickerType=this.displayType),this.slotProps&&this.slotProps.source){if(this.source={path:this.slotProps.source.path+"."+this.field,data:{}},this.slotProps.source.fromArray)this.source.data=this.slotProps.source.data,this.value=this.source.data,this.lockWatch=!0;else{var t=this.$fhirutils.pathFieldExpression(this.field);this.source.data=this.$fhirpath.evaluate(this.slotProps.source.data,t),1==this.source.data.length&&(this.value=this.source.data[0],this.lockWatch=!0)}this.disabled=this.readOnlyIfSet&&!!this.value}},save:function(t){this.errors=[],this.$refs.menu.save(t)}}},d=u,h=i("2877"),p=i("6544"),f=i.n(p),m=i("8336"),v=i("b0af"),y=i("99d9"),b=i("a523"),g=i("2e4b"),x=i("132d"),k=i("e449"),_=i("0fd9"),w=i("2fa4"),V=i("8654"),C=Object(h["a"])(d,a,s,!1,null,null,null);e["default"]=C.exports;f()(C,{VBtn:m["a"],VCard:v["a"],VCardText:y["c"],VCardTitle:y["d"],VContainer:b["a"],VDatePicker:g["a"],VIcon:x["a"],VMenu:k["a"],VRow:_["a"],VSpacer:w["a"],VTextField:V["a"]})},"6b10":function(t,e,i){"use strict";i.r(e);var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[t._t("default",null,{source:t.source})],2)},s=[],r=(i("ac1f"),i("5319"),{name:"fhir-extension",props:["field","sliceName","min","max","base-min","base-max","profile","slotProps","path","edit","constraints"],data:function(){return{source:{path:"",data:[]},errors:[]}},created:function(){this.setupData()},watch:{slotProps:{handler:function(){this.setupData()},deep:!0}},methods:{setupData:function(){if(this.slotProps&&this.slotProps.source)if(this.source={path:this.slotProps.source.path+"."+this.field,data:{}},this.slotProps.source.fromArray)this.source.data=this.slotProps.source.data;else{var t;t=this.profile?this.profile:this.sliceName;var e=this.field.replace(/([^:]+):(.+)/,"$1.where(url='"+t+"')");this.source.data=this.$fhirpath.evaluate(this.slotProps.source.data,e)}}}}),n=r,o=i("2877"),l=Object(o["a"])(n,a,s,!1,null,null,null);e["default"]=l.exports},7372:function(t,e,i){"use strict";i.r(e);var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-container",{staticClass:"my-3"},[i("v-form",{ref:"form",model:{value:t.valid,callback:function(e){t.valid=e},expression:"valid"}},[t._t("default",null,{source:t.source}),i("v-overlay",{attrs:{value:t.overlay}},[i("v-progress-circular",{attrs:{color:"primary",indeterminate:"",size:"50"}})],1),i("v-navigation-drawer",{staticClass:"primary darken-1 white--text",staticStyle:{"z-index":"3"},attrs:{app:"",clipped:"",permanent:"",right:""}},[i("v-list",{staticClass:"white--text"},[t.$router.history.current.path==="/resource/view/practitioner/"+this.fhirId?i("v-list-item",[i("v-btn",{staticClass:"primary",attrs:{loading:t.loadingId},on:{click:t.printEmployeeId},scopedSlots:t._u([{key:"loader",fn:function(){return[i("span",{staticClass:"custom-loader"},[i("v-icon",{attrs:{light:""}},[t._v("mdi-cached")])],1)]},proxy:!0}],null,!1,1919056595)},[i("v-icon",{staticClass:"mr-2",attrs:{right:""}},[t._v(" mdi-card-account-details-outline ")]),t._v(" "+t._s(t.$t("App.ihris-resource.GenerateId"))+" ")],1)],1):t._e(),t.$router.history.current.path==="/resource/view/practitioner/"+this.fhirId?i("v-list-item",[i("v-btn",{staticClass:"primary",attrs:{loading:t.loadingCv},on:{click:t.printEmployeeCv},scopedSlots:t._u([{key:"loader",fn:function(){return[i("span",{staticClass:"custom-loader"},[i("v-icon",{attrs:{light:""}},[t._v("mdi-cached")])],1)]},proxy:!0}],null,!1,1919056595)},[i("v-icon",{staticClass:"mr-2",attrs:{dark:"",right:""}},[t._v(" mdi-file-pdf-box")]),t._v(" "+t._s(t.$t("App.ihris-resource.GenerateCv"))+" ")],1)],1):t._e(),i("v-list-item",[t.edit?i("v-btn",{staticClass:"secondary",attrs:{dark:""},on:{click:function(e){return t.$router.go(0)}}},[i("v-icon",{attrs:{light:""}},[t._v("mdi-pencil-off")]),i("span",[t._v(t._s(t.$t("App.ihris-resource.Cancel")))])],1):i("v-btn",{staticClass:"secondary",attrs:{dark:""},on:{click:function(e){return t.$emit("set-edit",!t.edit)}}},[i("v-icon",{attrs:{light:""}},[t._v("mdi-pencil")]),i("span",[t._v(t._s(t.$t("App.ihris-resource.Edit")))])],1),i("v-spacer"),t.edit?[t.valid?i("v-btn",{staticClass:"success darken-1",attrs:{disabled:!t.valid,dark:""},on:{click:function(e){return t.processFHIR()}}},[i("v-icon",{attrs:{light:""}},[t._v("mdi-content-save")]),i("span")],1):i("v-btn",{staticClass:"warning",attrs:{dark:""},on:{click:function(e){return t.$refs.form.validate()}}},[i("v-icon",{attrs:{light:""}},[t._v("mdi-content-save")]),i("span",[t._v(t._s(t.$t("App.ihris-resource.Save")))])],1)]:t._e()],2),i("v-divider",{attrs:{color:"white"}}),!t.edit&&t.links&&t.links.length?t._l(t.links,(function(e,a){return i("v-list-item",{key:e.url},[i("v-btn",{key:e.url,staticClass:"primary",attrs:{text:!e.button,to:t.getLinkUrl(e)}},[e.icon?i("v-icon",{attrs:{light:""}},[t._v(t._s(e.icon))]):t._e(),t._v(" "+t._s(t.linktext[a])+" ")],1)],1)})):t._e(),t.sectionMenu?i("v-subheader",{staticClass:"white--text"},[i("h2",[t._v(t._s(t.$t("App.ihris-resource.Sections")))])]):t._e(),t._l(t.sectionMenu,(function(e){return i("v-list-item",{key:e.name,class:"#section-"+e.name===t.path?"highlighted":"",attrs:{href:"#section-"+e.name}},[t.edit&&e.secondary?t._e():i("v-list-item-content",{staticClass:"white--text"},[i("v-list-item-title",{staticClass:"text-uppercase"},[i("h4",[t._v(t._s(t.$t("App.ihris-resource."+e.title)))])]),i("v-list-item-subtitle",{staticClass:"white--text"},[t._v(t._s(t.$t("App.ihris-resource."+e.desc))+" ")])],1)],1)}))],2)],1)],2)],1)},s=[],r=(i("caad"),i("d81d"),i("fb6a"),i("b0c0"),i("b64b"),i("d3b7"),i("ac1f"),i("2532"),i("3ca3"),i("5319"),i("1276"),i("2ca0"),i("ddb0"),i("2b3d"),i("96cf"),i("1da1")),n=i("b85c"),o=i("bc3a"),l=i.n(o),c={name:"ihris-resource",props:["title","field","fhir-id","page","profile","section-menu","edit","links","constraints"],data:function(){return{fhir:{},orig:{},valid:!0,source:{data:{},path:""},path:"",loading:!1,overlay:!1,isEdit:!1,linktext:[],advancedValid:!0,loadingId:!1,loadingCv:!1}},mounted:function(){this.isQuestionnaire?window.removeEventListener("scroll",this.handleScroll):window.addEventListener("scroll",this.handleScroll)},beforeDestroy:function(){window.removeEventListener("scroll",this.handleScroll)},created:function(){var t=this;if(this.fhirId)this.loading=!0,fetch("/fhir/"+this.field+"/"+this.fhirId).then((function(e){e.json().then((function(e){t.orig=e,t.source={data:e,path:t.field},t.setLinkText(),t.loading=!1})).catch((function(e){console.log(t.field,t.fhirId,e)}))})).catch((function(e){console.log(t.field,t.fhirId,e)}));else if(this.$route.query){for(var e={resourceType:this.field},i=!1,a=0,s=Object.keys(this.$route.query);a<s.length;a++){var r=s[a];if(r.startsWith(this.field+".")){i=!0;var o,l=r.substring(this.field.length+1).split("."),c=l.pop(),u=e,d=Object(n["a"])(l);try{for(d.s();!(o=d.n()).done;){var h=o.value;if(h.includes("["))try{var p=h.split("["),f=p[0],m=p[1].slice(0,-1);if(u.hasOwnProperty(f)||(u[f]=[]),m){var v={};u[f][parseInt(m)]=v,u=v}else{var y={};u[f].push(y),u=y}}catch(k){console.log("Unable to process",r)}else u.hasOwnProperty(h)||(u[h]={},u=u[h])}}catch(k){d.e(k)}finally{d.f()}if(c.includes("["))try{var b=c.split("["),g=b[0],x=b[1].slice(0,-1);u.hasOwnProperty(g)||(u[g]=[]),x?u[g][parseInt(x)]=this.$route.query[r]:u[g].push(this.$route.query[r])}catch(k){console.log("Unable to process",r)}else u[c]=this.$route.query[r]}}i&&(this.source={data:e,path:this.field})}},computed:{hasFhirId:function(){return""!=this.fhirId&&!!this.fhirId}},methods:{handleScroll:function(){var t=this;this.hasScrolled=window.top.scrollY>=100,this.sectionMenu.map((function(e){var i=document.getElementById("section-".concat(e.name)),a=i.offsetTop;pageYOffset>=a&&(t.path="#section-".concat(e.name))}))},getLinkField:function(t){var e=this.$fhirpath.evaluate(this.source.data,t);return!!e&&e[0]},getLinkUrl:function(t){var e;if(t.field&&(e=this.getLinkField(t.field)),e){if(e.includes("/")){var i=e.split("/");e=i[1]}return t.url.replace("FIELD",e)}return t.url},setLinkText:function(){var t=this,e=function(e){var i=t.links[e];if(i.text)t.linktext[e]=i.text;else if(i.field){var a=t.getLinkField(i.field);a&&t.$fhirutils.lookup(a).then((function(i){t.$set(t.linktext,e,i)}))}};for(var i in this.links)e(i)},processFHIR:function(){var t=Object(r["a"])(regeneratorRuntime.mark((function t(){var e,i,a,s=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(this.$refs.form.validate(),this.valid){t.next=3;break}return t.abrupt("return");case 3:return this.advancedValid=!0,this.overlay=!0,this.loading=!0,e=function(){var t=Object(r["a"])(regeneratorRuntime.mark((function t(i,a,r){var o,l,c,u,d,h,p;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:o=Object(n["a"])(r),t.prev=1,o.s();case 3:if((l=o.n()).done){t.next=36;break}if(c=l.value,u=i,d=a,c.field&&!c.fieldType&&(h=void 0,c.sliceName?c.field.startsWith("value[x]")?(h=c.field.substring(9),u+="."+h):(h=c.field.replace(":"+c.sliceName,""),u+="."+h):(h=c.field,u+="."+h),"1"!==c.max||"1"!==c.baseMax?a.hasOwnProperty(h)||(d[h]=[]):d[h]={},c.hasOwnProperty("value")?(Array.isArray(d[h])?d[h].push(c.value):d[h]=c.value,d=d[h]):Array.isArray(d[h])?(p={},c.profile?p.url=c.profile:"extension"===h&&c.sliceName&&(p.url=c.sliceName),d[h].push(p),d=p):d=d[h]),!c.$children){t.next=18;break}return t.prev=9,t.next=12,e(u,d,c.$children);case 12:t.next=18;break;case 14:t.prev=14,t.t0=t["catch"](9),s.advancedValid=!1,console.log(t.t0);case 18:if(!c.constraints){t.next=34;break}if(c.errors=[],t.prev=20,t.t1=s.advancedValid,!t.t1){t.next=26;break}return t.next=25,s.$fhirutils.checkConstraints(c.constraints,s.constraints,d,c.errors,s.fhirId);case 25:t.t1=t.sent;case 26:s.advancedValid=t.t1,t.next=34;break;case 29:t.prev=29,t.t2=t["catch"](20),s.advancedValid=!1,c.errors.push("An unknown error occurred."),console.log(t.t2);case 34:t.next=3;break;case 36:t.next=41;break;case 38:t.prev=38,t.t3=t["catch"](1),o.e(t.t3);case 41:return t.prev=41,o.f(),t.finish(41);case 44:case"end":return t.stop()}}),t,null,[[1,38,41,44],[9,14],[20,29]])})));return function(e,i,a){return t.apply(this,arguments)}}(),this.fhir={resourceType:this.field,meta:{profile:[this.profile]}},t.prev=8,t.next=11,e(this.field,this.fhir,this.$children);case 11:t.next=17;break;case 13:t.prev=13,t.t0=t["catch"](8),this.advancedValid=!1,console.log(t.t0);case 17:if(this.advancedValid){t.next=22;break}return this.overlay=!1,this.loading=!1,this.$store.commit("setMessage",{type:"error",text:"There were errors on the form."}),t.abrupt("return");case 22:console.log("FINISHED PROCESS AND CHECK."),i="/fhir/"+this.field,a={method:"POST",headers:{"Content-Type":"application/fhir+json"},redirect:"manual"},this.fhirId&&(this.fhir.id=this.fhirId,i+="/"+this.fhirId,a.method="PUT"),a.body=JSON.stringify(this.fhir),fetch(i,a).then((function(t){201!==t.status&&200!==t.status||t.json().then((function(t){s.overlay=!1,s.loading=!1,s.fhirId?(s.$store.commit("setMessage",{type:"success",text:"Update successful."}),setTimeout((function(){return s.$router.go(0)}),1e3)):s.$router.push({name:"resource_view",params:{page:s.page,id:t.id}})}))}));case 28:case"end":return t.stop()}}),t,this,[[8,13]])})));function e(){return t.apply(this,arguments)}return e}(),printEmployeeId:function(){var t=this;this.loadingId=!0,l()({url:"/config/employeeId/".concat(this.fhirId),method:"GET",responseType:"blob"}).then((function(e){var i=new Blob([e.data],{type:"application/png"}),a=document.createElement("a");a.href=window.URL.createObjectURL(i),a.download="employee_identification_card_".concat(t.fhirId,".png"),a.click(),t.loadingId=!1})).catch((function(e){console.log(e),t.loadingId=!1}))},printEmployeeCv:function(){var t=this;this.loadingCv=!0,l()({url:"/config/employeeCv/".concat(this.fhirId),method:"GET",responseType:"blob"}).then((function(e){var i=new Blob([e.data],{type:"application/pdf"}),a=document.createElement("a");a.href=window.URL.createObjectURL(i),a.download="employee_resume_".concat(t.fhirId,".pdf"),a.click(),t.loadingCv=!1})).catch((function(e){console.log(e),t.loadingCv=!1}))}}},u=c,d=(i("7f06"),i("2877")),h=i("6544"),p=i.n(h),f=i("8336"),m=i("a523"),v=i("ce7e"),y=i("4bd4"),b=i("132d"),g=i("8860"),x=i("da13"),k=i("5d23"),_=i("f774"),w=i("a797"),V=i("490a"),C=i("2fa4"),P=i("e0c7"),$=Object(d["a"])(u,a,s,!1,null,null,null);e["default"]=$.exports;p()($,{VBtn:f["a"],VContainer:m["a"],VDivider:v["a"],VForm:y["a"],VIcon:b["a"],VList:g["a"],VListItem:x["a"],VListItemContent:k["a"],VListItemSubtitle:k["b"],VListItemTitle:k["c"],VNavigationDrawer:_["a"],VOverlay:w["a"],VProgressCircular:V["a"],VSpacer:C["a"],VSubheader:P["a"]})},"7f06":function(t,e,i){"use strict";var a=i("9090"),s=i.n(a);s.a},"7fb0":function(t,e,i){"use strict";i.r(e);var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("ihris-element",{attrs:{edit:t.edit,loading:!1},scopedSlots:t._u([{key:"form",fn:function(){return[i("v-menu",{ref:"menu",attrs:{"close-on-content-click":!1,transition:"scale-transition","offset-y":"","min-width":"290px"},scopedSlots:t._u([{key:"activator",fn:function(e){var a=e.on;return[i("v-text-field",t._g({attrs:{label:t.$t("App.fhir-date."+t.label),"prepend-inner-icon":"mdi-calendar",readonly:"",outlined:"","hide-details":"auto",rules:t.rules,"error-messages":t.errors,dense:""},scopedSlots:t._u([{key:"label",fn:function(){return[t._v(t._s(t.$t("App.fhir-date."+t.label))+" "),t.required?i("span",{staticClass:"red--text font-weight-bold"},[t._v("*")]):t._e()]},proxy:!0}],null,!0),model:{value:t.displayValue,callback:function(e){t.displayValue=e},expression:"displayValue"}},a))]}}]),model:{value:t.menu,callback:function(e){t.menu=e},expression:"menu"}},[t.isEthiopian?i("v-container",{staticClass:"ma-0 pa-0"},[i("v-row",{attrs:{"no-gutters":""}},[i("v-card",{attrs:{"min-width":"300px"}},[i("v-card-title",{staticClass:"primary white--text"},[t._v(" Ethiopian Calendar"),i("v-spacer"),i("v-btn",{staticClass:"white--text",attrs:{dark:"",icon:"",group:"",small:""},on:{click:function(e){t.showGregorian=!t.showGregorian}}},[t.showGregorian?i("v-icon",[t._v("mdi-calendar")]):i("v-icon",[t._v("mdi-calendar-multiple")])],1)],1),"year"===t.pickerType?i("v-card-text",[i("br"),i("v-text-field",{attrs:{clearable:"",type:"number",disabled:t.disabled,label:t.label,min:t.minYearET,max:t.maxYearET,rules:t.rules,"error-messages":t.errors,dense:""},on:{change:function(e){t.errors=[]}},model:{value:t.etValue,callback:function(e){t.etValue=e},expression:"etValue"}})],1):i("v-ethiopian-date-picker",{ref:"etPicker",attrs:{label:"Ethiopian",color:"secondary",landscape:t.$vuetify.breakpoint.smAndUp,max:t.maxValueETDate,min:t.minValueETDate,type:t.pickerType,disabled:t.disabled,locale:"am"},on:{change:t.save},model:{value:t.etValue,callback:function(e){t.etValue=e},expression:"etValue"}})],1),t.showGregorian?i("v-card",{attrs:{"min-width":"300px"}},[i("v-card-title",{staticClass:"primary white--text"},[t._v(" Gregorian Calendar"),i("v-spacer"),i("v-btn",{staticClass:"white--text",attrs:{dark:"",icon:"",group:"",small:""},on:{click:function(e){t.showGregorian=!1}}},[i("v-icon",[t._v("mdi-close")])],1)],1),"year"===t.pickerType?i("v-card-text",[i("br"),i("v-text-field",{attrs:{clearable:"",type:"number",disabled:t.disabled,label:t.label,min:t.minYear,max:t.maxYear,rules:t.rules,"error-messages":t.errors,dense:""},on:{change:function(e){t.errors=[]}},model:{value:t.value,callback:function(e){t.value=e},expression:"value"}})],1):i("v-date-picker",{ref:"gPicker",attrs:{color:"secondary",landscape:t.$vuetify.breakpoint.smAndUp,max:t.dateValueMax,min:t.dateValueMin,type:t.pickerType,disabled:t.disabled},on:{change:t.save},model:{value:t.value,callback:function(e){t.value=e},expression:"value"}})],1):t._e()],1)],1):"year"===t.pickerType?i("v-card",{attrs:{"min-width":"300px"}},[i("v-card-text",[i("br"),i("v-text-field",{attrs:{type:"number",disabled:t.disabled,label:t.label,min:t.minYear,max:t.maxYear,rules:t.rules,"error-messages":t.errors,dense:""},on:{change:function(e){t.errors=[]}},model:{value:t.value,callback:function(e){t.value=e},expression:"value"}})],1)],1):i("v-date-picker",{ref:"picker",attrs:{color:"secondary",landscape:t.$vuetify.breakpoint.smAndUp,max:t.dateValueMax,min:t.dateValueMin,type:t.pickerType,disabled:t.disabled},on:{change:t.save},model:{value:t.value,callback:function(e){t.value=e},expression:"value"}})],1)]},proxy:!0},{key:"header",fn:function(){return[t._v(" "+t._s(t.$t("App.fhir-date."+t.label))+" ")]},proxy:!0},{key:"value",fn:function(){return[t._v(" "+t._s(t.displayValue)+" ")]},proxy:!0}])})},s=[],r=(i("d81d"),i("a9e3"),i("d3b7"),i("ac1f"),i("25f0"),i("466d"),i("4d90"),i("1276"),i("3835")),n=i("b287"),o=i("c472"),l=i("08e0"),c=i.n(l),u={name:"fhir-date",props:["field","min","max","base-min","base-max","label","slotProps","path","edit","sliceName","minValueDate","maxValueDate","minValueQuantity","maxValueQuantity","displayType","readOnlyIfSet","calendar","constraints"],components:{IhrisElement:n["a"],VEthiopianDatePicker:o["a"]},data:function(){return{value:null,etValue:null,menu:!1,source:{path:"",data:{}},qField:"valueDate",pickerType:"date",disabled:!1,showGregorian:!1,errors:[],lockWatch:!1}},created:function(){this.setupData()},computed:{dateValueMax:function(){if(this.maxValueQuantity){var t=this.convertQuantity(this.maxValueQuantity,"add");if(t)return t}if(this.maxValueDate)return this.maxValueDate},dateValueMin:function(){if(this.minValueQuantity){var t=this.convertQuantity(this.minValueQuantity,"subtract");if(t)return t}else if(this.minValueDate)return this.minValueDate},minYear:function(){return this.dateValueMin?this.dateValueMin.substring(0,4):void 0},maxYear:function(){return this.dateValueMax?this.dateValueMax.substring(0,4):void 0},minYearET:function(){return this.minValueETDate?this.minValueETDate.substring(0,4):void 0},maxYearET:function(){return this.maxValueETDate?this.maxValueETDate.substring(0,4):void 0},isEthiopian:function(){return"Ethiopian"===this.calendar},minValueETDate:function(){return this.dateValueMin?this.convertGE(this.dateValueMin):null},maxValueETDate:function(){return this.dateValueMax?this.convertGE(this.dateValueMax):null},displayValue:function(){return this.isEthiopian?this.value&&"Ethiopian: "+this.etValue+" Gregorian: "+this.value:this.value},index:function(){return this.slotProps&&this.slotProps.input?this.slotProps.input.index:void 0},required:function(){return(this.index||0)<this.min},rules:function(){var t=this;return this.required?[function(e){return!!e||t.label+" is required"}]:[]}},watch:{menu:function(t){var e=this;"year"!==this.pickerType&&(this.isEthiopian?!this.value&&t&&setTimeout((function(){return e.$refs.etPicker.activePicker="YEAR"})):!this.value&&t&&setTimeout((function(){return e.$refs.picker.activePicker="YEAR"})))},showGregorian:function(t){var e=this;!this.value&&t&&setTimeout((function(){return e.$refs.gPicker.activePicker="YEAR"}))},slotProps:{handler:function(){this.lockWatch||this.setupData()},deep:!0},value:function(t){t?"year"===this.pickerType?4===t.length&&(this.etValue=this.convertGE(t)):this.etValue=this.convertGE(t):this.etValue=t},etValue:function(t){t?"year"===this.pickerType?4===t.length&&(this.value=this.convertEG(t)):this.value=this.convertEG(t):this.value=t}},methods:{convertQuantity:function(t,e){var i={a:"years",mo:"months",wk:"weeks",d:"days"},a=/(-?\d+)([a-z]{1,3})/,s=t.match(a);if(3===s.length)try{var r=s[1],n=i[s[2]];return"subtract"===e?this.$moment(this.$moment().subtract(r,n)).format("YYYY-MM-DD"):this.$moment(this.$moment().add(r,n)).format("YYYY-MM-DD")}catch(o){console.log("Failed to get date from quantity",o)}},convertGE:function(t){if(!t)return t;var e=t.split("-").map(Number),i=Object(r["a"])(e,3),a=i[0],s=i[1],n=i[2];if("year"===this.pickerType){var o=c.a.ge(a,s||6,n||1);return o.year.toString().padStart(4,"0")}var l=c.a.ge(a,s||1,n||1);return l.year.toString().padStart(4,"0")+"-"+l.month.toString().padStart(2,"0")+"-"+l.day.toString().padStart(2,"0")},convertEG:function(t){if(!t)return t;var e=t.split("-").map(Number),i=Object(r["a"])(e,3),a=i[0],s=i[1],n=i[2];if("year"===this.pickerType){var o=c.a.eg(a,s||6,n||1);return o.year.toString().padStart(4,"0")}var l=c.a.eg(a,s||1,n||1);return l.year.toString().padStart(4,"0")+"-"+l.month.toString().padStart(2,"0")+"-"+l.day.toString().padStart(2,"0")},setupData:function(){if(this.displayType&&(this.pickerType=this.displayType),this.slotProps&&this.slotProps.source){if(this.source={path:this.slotProps.source.path+"."+this.field,data:{}},this.slotProps.source.fromArray)this.source.data=this.slotProps.source.data,this.value=this.source.data,this.lockWatch=!0;else{var t=this.$fhirutils.pathFieldExpression(this.field);this.source.data=this.$fhirpath.evaluate(this.slotProps.source.data,t),1==this.source.data.length&&(this.value=this.source.data[0],this.lockWatch=!0)}this.disabled=this.readOnlyIfSet&&!!this.value}},save:function(t){this.errors=[],this.$refs.menu.save(t)}}},d=u,h=i("2877"),p=i("6544"),f=i.n(p),m=i("8336"),v=i("b0af"),y=i("99d9"),b=i("a523"),g=i("2e4b"),x=i("132d"),k=i("e449"),_=i("0fd9"),w=i("2fa4"),V=i("8654"),C=Object(h["a"])(d,a,s,!1,null,null,null);e["default"]=C.exports;f()(C,{VBtn:m["a"],VCard:v["a"],VCardText:y["c"],VCardTitle:y["d"],VContainer:b["a"],VDatePicker:g["a"],VIcon:x["a"],VMenu:k["a"],VRow:_["a"],VSpacer:w["a"],VTextField:V["a"]})},8308:function(t,e,i){},"89c1":function(t,e,i){"use strict";i.r(e);var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("ihris-complex-card",{attrs:{complexField:t.field,slotProps:t.slotProps,label:t.label,errors:t.errors},scopedSlots:t._u([{key:"default",fn:function(e){return[t._t("default",null,{source:e.source})]}}],null,!0)})},s=[],r=i("fa57"),n={name:"fhir-human-name",props:["field","slotProps","sliceName","min","max","base-min","base-max","label","path","edit","constraints"],data:function(){return{errors:[]}},components:{IhrisComplexCard:r["a"]}},o=n,l=i("2877"),c=Object(l["a"])(o,a,s,!1,null,null,null);e["default"]=c.exports},9090:function(t,e,i){},a3c6:function(t,e,i){},ae87:function(t,e,i){"use strict";var a=i("a3c6"),s=i.n(a);s.a},b287:function(t,e,i){"use strict";var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[t.edit?i("v-container",[t._t("form")],2):i("div",[i("v-row",{attrs:{dense:""}},[i("v-col",{staticClass:"font-weight-bold",attrs:{cols:t.$store.state.cols.header}},[t._t("header")],2),t.loading?i("v-col",{attrs:{cols:t.$store.state.cols.content}},[i("v-progress-linear",{attrs:{indeterminate:"",color:"primary"}})],1):i("v-col",{attrs:{cols:t.$store.state.cols.content}},[t._t("value")],2)],1),i("v-divider")],1)],1)},s=[],r={name:"ihris-element",props:["edit","loading"]},n=r,o=i("2877"),l=i("6544"),c=i.n(l),u=i("62ad"),d=i("a523"),h=i("ce7e"),p=i("8e36"),f=i("0fd9"),m=Object(o["a"])(n,a,s,!1,null,null,null);e["a"]=m.exports;c()(m,{VCol:u["a"],VContainer:d["a"],VDivider:h["a"],VProgressLinear:p["a"],VRow:f["a"]})},b78c:function(t,e,i){"use strict";i.r(e);var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("ihris-element",{attrs:{edit:t.edit,loading:!1},scopedSlots:t._u([{key:"form",fn:function(){return[i("v-text-field",{attrs:{"error-messages":t.errors,disabled:t.disabled,label:t.$t("App.fhir-string."+t.display),outlined:"","hide-details":"auto",rules:t.rules,type:t.isPassword?t.showPassword?"text":"password":"text","append-icon":t.isPassword?t.showPassword?"mdi-eye":"mdi-eye-off":"",dense:""},on:{change:function(e){t.errors=[]},"click:append":function(e){t.showPassword=!t.showPassword}},scopedSlots:t._u([{key:"label",fn:function(){return[t._v(t._s(t.$t("App.fhir-string."+t.display))),t.required?i("span",{staticClass:"red--text font-weight-bold"},[t._v("*")]):t._e()]},proxy:!0}]),model:{value:t.value,callback:function(e){t.value=e},expression:"value"}})]},proxy:!0},{key:"header",fn:function(){return[t._v(" "+t._s(t.$t("App.fhir-string."+t.display))+" ")]},proxy:!0},{key:"value",fn:function(){return[t._v(" "+t._s(t.value)+" ")]},proxy:!0}])})},s=[],r=i("b287"),n={name:"fhir-string",props:["field","label","min","max","id","path","slotProps","sliceName","base-min","base-max","edit","readOnlyIfSet","constraints","displayType"],components:{IhrisElement:r["a"]},data:function(){return{source:{path:"",data:{}},value:"",showPassword:!1,qField:"valueString",disabled:!1,errors:[],lockWatch:!1}},created:function(){this.setupData()},watch:{slotProps:{handler:function(){this.lockWatch||this.setupData()},deep:!0}},methods:{setupData:function(){if(this.slotProps&&this.slotProps.source){if(this.source={path:this.slotProps.source.path+"."+this.field,data:{}},this.slotProps.source.fromArray)this.source.data=this.slotProps.source.data,this.value=this.source.data,this.lockWatch=!0;else{var t=this.$fhirutils.pathFieldExpression(this.field);this.source.data=this.$fhirpath.evaluate(this.slotProps.source.data,t),1==this.source.data.length&&(this.value=this.source.data[0],this.lockWatch=!0)}this.disabled=this.readOnlyIfSet&&!!this.value}}},computed:{index:function(){return this.slotProps&&this.slotProps.input?this.slotProps.input.index:void 0},display:function(){return this.slotProps&&this.slotProps.input?this.slotProps.input.label:this.label},required:function(){return(this.index||0)<this.min},rules:function(){var t=this;return this.required?[function(e){return!!e||t.display+" is required"}]:[]},isPassword:function(){return"password"===this.displayType}}},o=n,l=i("2877"),c=i("6544"),u=i.n(c),d=i("8654"),h=Object(l["a"])(o,a,s,!1,null,null,null);e["default"]=h.exports;u()(h,{VTextField:d["a"]})},bb1d:function(t,e,i){"use strict";i.r(e);var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[t.simpleDisplay?i("div",[i("v-row",{attrs:{dense:""}},[i("v-col",{staticClass:"font-weight-bold",attrs:{cols:t.$store.state.cols.header}},[t._v(t._s(t.$t("App.ihris-array."+t.label)))]),i("v-col",{attrs:{cols:t.$store.state.cols.header}},[t._v(t._s(t.simpleValue))])],1),i("v-divider")],1):i("v-container",[i("v-card",[t.edit?i("v-system-bar",{attrs:{color:"secondary",dark:""}},[t._v(" "+t._s(t.$t("App.ihris-array."+t.label))+" "),i("v-spacer"),t.subAvailable?i("v-btn",{attrs:{icon:""},on:{click:function(e){return t.removeRow()}}},[i("v-icon",{staticClass:"font-weight-bold"},[t._v("mdi-minus")])],1):t._e(),t.addAvailable?i("v-btn",{attrs:{icon:""},on:{click:function(e){return t.addRow()}}},[i("v-icon",[t._v("mdi-plus")])],1):t._e()],1):t._e(),t._l(t.inputs,(function(e){return t._t("default",null,{input:e,source:e.source})}))],2)],1)],1)},s=[],r=(i("caad"),i("a15b"),i("a434"),i("ac1f"),i("5319"),{name:"ihris-array",props:["label","min","max","id","path","slotProps","field","fieldType","profile","targetProfile","sliceName","edit"],data:function(){return{inputs:[],source:{path:"",data:[]},isArray:!0,lockWatch:!1}},created:function(){this.setupInputs()},watch:{slotProps:{handler:function(){this.lockWatch||this.setupInputs()},deep:!0}},methods:{setupInputs:function(){this.inputs=[],this.source={path:this.path,data:{}};var t=this.path;if(this.slotProps&&this.slotProps.source){var e=this.field;this.sliceName&&(e=this.field.replace(/([^:]+):(.+)/,"$1.where(url='"+this.profile+"')")),this.source.data=this.$fhirpath.evaluate(this.slotProps.source.data,e),this.source.data.length>0&&(this.lockWatch=!0)}for(var i=0;i<this.actualMin;i++){var a=this.label;this.displayIndex&&(a+=" ("+(i+1)+")");var s={label:a,index:i,data:void 0};this.source.data[i]&&(s.source={data:this.source.data[i],path:t+"["+i+"]",fromArray:!0}),this.inputs.push(s)}},addRow:function(){if(this.lockWatch=!0,this.addAvailable){var t=this.label;this.displayIndex&&(t+=" ("+(this.inputs.length+1)+")"),this.inputs.push({label:t,index:this.inputs.length})}},removeRow:function(){this.subAvailable&&this.inputs.splice(-1)},getField:function(){return this.field}},computed:{actualMin:function(){return Math.max(this.min,this.source.data.length>0?this.source.data.length:0)},addAvailable:function(){return"*"===this.max||this.inputs.length<this.max},displayIndex:function(){return"*"===this.max||this.max>1},subAvailable:function(){return this.actualMin<this.inputs.length},simpleDisplay:function(){return!this.edit&&["string"].includes(this.fieldType)},simpleValue:function(){return this.source.data.join(" ")}}}),n=r,o=i("2877"),l=i("6544"),c=i.n(l),u=i("8336"),d=i("b0af"),h=i("62ad"),p=i("a523"),f=i("ce7e"),m=i("132d"),v=i("0fd9"),y=i("2fa4"),b=(i("a9e3"),i("c7cd"),i("5530")),g=(i("8308"),i("3a66")),x=i("a9ad"),k=i("7560"),_=i("58df"),w=i("80d2"),V=Object(_["a"])(Object(g["a"])("bar",["height","window"]),x["a"],k["a"]).extend({name:"v-system-bar",props:{height:[Number,String],lightsOut:Boolean,window:Boolean},computed:{classes:function(){return Object(b["a"])({"v-system-bar--lights-out":this.lightsOut,"v-system-bar--absolute":this.absolute,"v-system-bar--fixed":!this.absolute&&(this.app||this.fixed),"v-system-bar--window":this.window},this.themeClasses)},computedHeight:function(){return this.height?isNaN(parseInt(this.height))?this.height:parseInt(this.height):this.window?32:24},styles:function(){return{height:Object(w["h"])(this.computedHeight)}}},methods:{updateApplication:function(){return this.$el?this.$el.clientHeight:this.computedHeight}},render:function(t){var e={staticClass:"v-system-bar",class:this.classes,style:this.styles,on:this.$listeners};return t("div",this.setBackgroundColor(this.color,e),Object(w["s"])(this))}}),C=Object(o["a"])(n,a,s,!1,null,null,null);e["default"]=C.exports;c()(C,{VBtn:u["a"],VCard:d["a"],VCol:h["a"],VContainer:p["a"],VDivider:f["a"],VIcon:m["a"],VRow:v["a"],VSpacer:y["a"],VSystemBar:V})},c408:function(t,e,i){"use strict";i.r(e);var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("ihris-complex-card",{attrs:{complexField:t.field,slotProps:t.slotProps,label:t.label,errors:t.errors},scopedSlots:t._u([{key:"default",fn:function(e){return[t._t("default",null,{source:e.source})]}}],null,!0)})},s=[],r=i("fa57"),n={name:"fhir-identifier",props:["field","slotProps","sliceName","min","max","base-min","base-max","label","path","edit","constraints"],data:function(){return{errors:[]}},components:{IhrisComplexCard:r["a"]}},o=n,l=i("2877"),c=Object(l["a"])(o,a,s,!1,null,null,null);e["default"]=c.exports},c472:function(t,e,i){"use strict";var a=i("85e5"),s=i("5b53"),r=i("9335"),n=i("2e4b"),o=i("50de"),l=i("530a"),c=i("80d2"),u=i("08e0"),d=i.n(u);class h{constructor(t,e,i){if(t&&e&&i)this.year=t,this.month=e,this.date=i;else{const t=new Date;this.fromGregorian(t.getFullYear(),t.getMonth()+1,t.getDate())}}getMonthName(t){const e={en:["Mäskäräm","Ṭəqəmt","Ḫədar","Taḫśaś","Ṭərr","Yäkatit","Mägabit","Miyazya","Gənbo","Säne","Ḥamle","Nähase","Ṗagume"],am:["መስከረም","ጥቅምት","ኅዳር","ታኅሣሥ","ጥር","የካቲት","መጋቢት","ሚያዝያ","ግንቦት","ሰኔ","ሐምሌ","ነሐሴ","ጳጉሜን"]};return e.hasOwnProperty(t)||(t="en"),e[t][this.month-1]}getDayName(t){var e={en:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],am:["እሑድ","ሰኞ","ማክሰ","ረቡዕ","ሐሙስ","ዓርብ","ቅዳሜ"]};return e.hasOwnProperty(t)||(t="en"),e[t][this.dayOfWeek()]}getDayAbbrev(t){var e={en:["S","M","T","W","T","F","S"],am:["እ","ሰ","ማ","ረ","ሐ","ዓ","ቅ"]};return e.hasOwnProperty(t)||(t="en"),e[t][this.dayOfWeek()]}toString(){return Object(o["a"])(this.year,4)+"-"+Object(o["a"])(this.month)+"-"+Object(o["a"])(this.date)}fromGregorian(t,e,i){let a=d.a.ge(t,e,i);this.year=a.year,this.month=a.month,this.date=a.day}toGregorian(){let t=d.a.eg(this.year,this.month,this.date);return{year:t.year,month:t.month,date:t.day}}toGregorianString(){let t=d.a.eg(this.year,this.month,this.date);return Object(o["a"])(t.year,4)+"-"+Object(o["a"])(t.month)+"-"+Object(o["a"])(t.day)}dayOfWeek(){const t=new Date(this.toGregorianString());return(t.getDay()+1)%7}daysInMonth(){return this.month<13?30:this.year%4===3?6:5}weekOfYear(){let t=new h(this.year,1,1),e=30*(this.month-1)+this.date+t.dayOfWeek(),i=Math.floor(e/7)+1;return i}format(t,e){return"day"===t?this.date:"year"===t?this.year:"month"===t?this.getMonthName(e):"date"===t?this.getDayName(e)+" "+this.getMonthName(e)+" "+this.date+"፣ "+this.year:"monthYear"===t?this.getMonthName(e)+" "+this.year:"weekday"===t?this.getDayAbbrev(e):void 0}}function p(t,e){return i=>{const[a,s,r]=i.trim().split(" ")[0].split("-").map(Number),n=new h(a,s||1,r||1);return n.format(t,e)}}function f(t,e){let i=new h(t,e,1);return i.daysInMonth()}function m(t,e){let i=new h(t,e,1);return i.dayOfWeek()}function v(t,e,i){let a=new h(t,e,i);return a.weekOfYear()}function y(t,e){const[i,a]=t.split("-").map(Number);return a+e===0?i-1+"-13":a+e===14?i+1+"-01":`${i}-${Object(o["a"])(a+e)}`}var b={extends:a["a"],computed:{formatter(){return this.format||p(String(this.value).split("-")[1]?"monthYear":"year",this.currentLocale)}},methods:{calculateChange(t){const[e,i]=String(this.value).split("-").map(Number);return null==i?""+(e+t):y(String(this.value),t)}}},g={extends:s["a"],computed:{formatter(){return this.format||p("month",this.currentLocale)}},methods:{genTBody(){const t=[],e=Array(4).fill(null),i=13/e.length;for(let a=0;a<i;a++){const i=e.map((t,i)=>{const s=a*e.length+i;if(s>12)return;const r=`${this.displayedYear}-${Object(o["a"])(s+1)}`;return this.$createElement("td",{key:s},[this.genButton(r,!1,"month",this.formatter)])});t.push(this.$createElement("tr",{key:a},i))}return this.$createElement("tbody",t)},genButton(t,e,i,a){const s=Object(l["a"])(t,this.min,this.max,this.allowedDates),r=this.isSelected(t)&&s,n=t===this.current,o=r?this.setBackgroundColor:this.setTextColor,c=(r||n)&&(this.color||"accent");return this.$createElement("button",o(c,{staticClass:"v-btn",class:this.genButtonClasses(s,e,r,n),attrs:{type:"button"},domProps:{disabled:this.disabled||!s},on:this.genButtonEvents(t,s,i)}),[this.$createElement("div",{staticClass:"v-btn__content"},[a(t)]),this.genEvents(t)])}}},x={extends:r["a"],computed:{formatter(){return this.format||p("day",this.currentLocale)},weekdayFormatter(){return this.weekdayFormat||p("weekday",this.currentLocale)},weekDays(){const t=parseInt(this.firstDayOfWeek,10);return Array(7).fill().map((e,i)=>this.weekdayFormatter("2013-01-"+(t+i+10)))}},methods:{weekDaysBeforeFirstDayOfTheMonth(){const t=m(this.displayedYear,this.displayedMonth);return(t-parseInt(this.firstDayOfWeek)+7)%7},getWeekNumber(t){return v(this.displayedYear,this.displayedMonth,t)},genTBody(){const t=[],e=f(this.displayedYear,this.displayedMonth);let i=[],a=this.weekDaysBeforeFirstDayOfTheMonth();this.showWeek&&i.push(this.genWeekNumber(this.getWeekNumber(1)));while(a--)i.push(this.$createElement("td"));for(a=1;a<=e;a++){const s=`${this.displayedYear}-${Object(o["a"])(this.displayedMonth)}-${Object(o["a"])(a)}`;i.push(this.$createElement("td",[this.genButton(s,!0,"date",this.formatter)])),i.length%(this.showWeek?8:7)===0&&(t.push(this.genTR(i)),i=[],this.showWeek&&a<e&&i.push(this.genWeekNumber(this.getWeekNumber(a+7>e?e:a+7))))}return i.length&&t.push(this.genTR(i)),this.$createElement("tbody",t)}}};function k(t,e){const[i,a=1,s=1]=t.split("-");return`${i}-${Object(o["a"])(a)}-${Object(o["a"])(s)}`.substr(0,{date:10,month:7,year:4}[e])}var _={extends:n["a"],name:"VEthiopianDatePicker",props:{max:{type:String,validator:t=>Number(k(t,"year"))<=3e3},min:{type:String,validator:t=>Number(k(t,"year"))>=1}},data(){const t=new h;return{activePicker:this.type.toUpperCase(),inputDay:null,inputMonth:null,inputYear:null,isReversing:!1,now:t,tableDate:(()=>{if(this.pickerDate)return this.pickerDate;const e=Object(c["G"])(this.value),i=e[e.length-1]||("string"===typeof this.showCurrent?this.showCurrent:`${t.year}-${t.month}`);return k(i,"date"===this.type?"month":"year")})()}},computed:{current(){return!0===this.showCurrent?k(`${this.now.year}-${this.now.month}-${this.now.date}`,this.type):this.showCurrent||null},inputDate(){return"date"===this.type?`${this.inputYear}-${Object(o["a"])(this.inputMonth)}-${Object(o["a"])(this.inputDay)}`:`${this.inputYear}-${Object(o["a"])(this.inputMonth)}`},tableMonth(){return Number((this.pickerDate||this.tableDate).split("-")[1])},minMonth(){return this.min?k(this.min,"month"):"1900-01"},maxMonth(){return this.max?k(this.max,"month"):"2100-13"},minYear(){return this.min?k(this.min,"year"):"1900"},maxYear(){return this.max?k(this.max,"year"):"2100"},formatters(){return{year:p("year",this.currentLocale),titleDate:this.titleDateFormat||(this.isMultiple?this.defaultTitleMultipleDateFormatter:this.defaultTitleDateFormatter)}},defaultTitleDateFormatter(){const t=p(this.type,this.currentLocale),e=e=>t(e).replace(/([^\d\s])([\d])/g,(t,e,i)=>`${e} ${i}`).replace(", ",",<br>");return this.landscape?e:t}},methods:{yearClick(t){this.inputYear=t,"month"===this.type?this.tableDate=""+t:this.tableDate=`${t}-${Object(o["a"])(this.tableMonth||1)}`,this.activePicker="MONTH",this.reactive&&!this.readonly&&!this.isMultiple&&this.isDateAllowed(this.inputDate)&&this.$emit("input",this.inputDate)},monthClick(t){this.inputYear=parseInt(t.split("-")[0],10),this.inputMonth=parseInt(t.split("-")[1],10),"date"===this.type?(this.inputDay&&(this.inputDay=Math.min(this.inputDay,f(this.inputYear,this.inputMonth))),this.tableDate=t,this.activePicker="DATE",this.reactive&&!this.readonly&&!this.isMultiple&&this.isDateAllowed(this.inputDate)&&this.$emit("input",this.inputDate)):this.emitInput(this.inputDate)},dateClick(t){this.inputYear=parseInt(t.split("-")[0],10),this.inputMonth=parseInt(t.split("-")[1],10),this.inputDay=parseInt(t.split("-")[2],10),this.emitInput(this.inputDate)},genTableHeader(){return this.$createElement(b,{props:{nextIcon:this.nextIcon,color:this.color,dark:this.dark,disabled:this.disabled,format:this.headerDateFormat,light:this.light,locale:this.locale,min:"DATE"===this.activePicker?this.minMonth:this.minYear,max:"DATE"===this.activePicker?this.maxMonth:this.maxYear,nextAriaLabel:"DATE"===this.activePicker?this.nextMonthAriaLabel:this.nextYearAriaLabel,prevAriaLabel:"DATE"===this.activePicker?this.prevMonthAriaLabel:this.prevYearAriaLabel,prevIcon:this.prevIcon,readonly:this.readonly,value:"DATE"===this.activePicker?`${Object(o["a"])(this.tableYear,4)}-${Object(o["a"])(this.tableMonth)}`:""+Object(o["a"])(this.tableYear,4)},on:{toggle:()=>this.activePicker="DATE"===this.activePicker?"MONTH":"YEAR",input:t=>this.tableDate=t}})},genDateTable(){return this.$createElement(x,{props:{allowedDates:this.allowedDates,color:this.color,current:this.current,dark:this.dark,disabled:this.disabled,events:this.events,eventColor:this.eventColor,firstDayOfWeek:this.firstDayOfWeek,format:this.dayFormat,light:this.light,locale:this.locale,localeFirstDayOfYear:this.localeFirstDayOfYear,min:this.min,max:this.max,range:this.range,readonly:this.readonly,scrollable:this.scrollable,showWeek:this.showWeek,tableDate:`${Object(o["a"])(this.tableYear,4)}-${Object(o["a"])(this.tableMonth+1)}`,value:this.value,weekdayFormat:this.weekdayFormat},ref:"table",on:{input:this.dateClick,"update:table-date":t=>this.tableDate=t,"click:date":t=>this.$emit("click:date",t),"dblclick:date":t=>this.$emit("dblclick:date",t)}})},genMonthTable(){return this.$createElement(g,{props:{allowedDates:"month"===this.type?this.allowedDates:null,color:this.color,current:this.current?k(this.current,"month"):null,dark:this.dark,disabled:this.disabled,events:"month"===this.type?this.events:null,eventColor:"month"===this.type?this.eventColor:null,format:this.monthFormat,light:this.light,locale:this.locale,min:this.minMonth,max:this.maxMonth,range:this.range,readonly:this.readonly&&"month"===this.type,scrollable:this.scrollable,value:this.selectedMonths,tableDate:""+Object(o["a"])(this.tableYear,4)},ref:"table",on:{input:this.monthClick,"update:table-date":t=>this.tableDate=t,"click:month":t=>this.$emit("click:month",t),"dblclick:month":t=>this.$emit("dblclick:month",t)}})},setInputDate(){if(this.lastValue){const t=this.lastValue.split("-");this.inputYear=parseInt(t[0],10),this.inputMonth=parseInt(t[1],10),"date"===this.type&&(this.inputDay=parseInt(t[2],10))}else this.inputYear=this.inputYear||this.now.year,this.inputMonth=null==this.inputMonth?this.inputMonth:this.now.month,this.inputDay=this.inputDay||this.now.date}}};e["a"]=_},e07f:function(t,e,i){"use strict";i.r(e);var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return t.edit&&t.secondary?t._e():i("div",{staticClass:"ihris-section",attrs:{id:"section-"+t.name}},[i("v-card",{staticClass:"mx-auto",attrs:{"max-width":"700",outlined:""}},[i("v-card-title",{staticClass:"primary darken-1 white--text text-uppercase font-weight-bold"},[t._v(t._s(t.$t("App.ihris-section."+t.title))+" ")]),"language"!==t.name?i("v-card-text",{staticClass:"my-3"},[t._t("default",null,{source:t.slotProps.source})],2):t._e(),"language"===t.name?i("v-card-text",{staticClass:"my-3"},[i("language-detail")],1):t._e()],1)],1)},s=[],r=function(){var t=this,e=this,i=e.$createElement,a=e._self._c||i;return a("v-container",[a("v-row",{attrs:{justify:"center"}},[a("v-dialog",{attrs:{persistent:"","max-width":"680px"},model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[a("v-card",{staticClass:"px-6 py-4"},[a("v-card-title",{staticClass:"justify-center"},[a("span",{staticClass:"text-h6"},[a("v-icon",{staticClass:"mr-2",attrs:{large:"",color:"primary"}},[e._v("mdi-translate")]),e._v("Add New Language")],1)]),a("v-card-text",[a("v-container",[a("v-row",[a("v-col",{attrs:{cols:"12"}},[a("v-autocomplete",{attrs:{dense:"",items:e.languageList,label:"Language",filter:e.customFilter,required:"",outlined:"","item-text":"display","return-object":""},scopedSlots:e._u([{key:"item",fn:function(t){return["object"===typeof t.item?[a("v-list-item-content",{domProps:{textContent:e._s(t.item.display)}})]:e._e()]}}]),model:{value:e.selectedLanguage,callback:function(t){e.selectedLanguage=t},expression:"selectedLanguage"}})],1),e._l(e.proficiencyInput,(function(t,i){return a("v-row",{key:i,staticClass:"mx-2"},[a("v-col",{attrs:{cols:"5"}},[a("v-autocomplete",{attrs:{dense:"",label:"proficiency Type",items:e.proficiencyType,outlined:"","item-text":"display","return-object":""},scopedSlots:e._u([{key:"item",fn:function(t){return["object"===typeof t.item?[a("v-list-item-content",{domProps:{textContent:e._s(t.item.display)}})]:e._e()]}}],null,!0),model:{value:t.extension[1].valueCoding,callback:function(i){e.$set(t.extension[1],"valueCoding",i)},expression:"proficiencyData.extension[1].valueCoding"}})],1),a("v-col",{attrs:{cols:"5"}},[a("v-autocomplete",{attrs:{dense:"",items:e.proficiency,label:"Proficiency",outlined:"","item-text":"display","return-object":""},scopedSlots:e._u([{key:"item",fn:function(t){return["object"===typeof t.item?[a("v-list-item-content",{domProps:{textContent:e._s(t.item.display)}})]:e._e()]}}],null,!0),model:{value:t.extension[0].valueCoding,callback:function(i){e.$set(t.extension[0],"valueCoding",i)},expression:"proficiencyData.extension[0].valueCoding"}})],1),i===e.proficiencyInput.length-1?a("v-cols",{attrs:{cols:"2"}},[a("v-row",{staticClass:"mt-4 ml-2"},[a("v-btn",{attrs:{rounded:"",small:"",icon:"",flat:"",color:"primary",disabled:e.proficiencyInput.length>=4},on:{click:e.addProficiency}},[a("v-icon",{attrs:{left:""}},[e._v(" mdi-plus-circle ")])],1),a("v-btn",{attrs:{rounded:"",small:"",icon:"",flat:"",color:"primary",disabled:e.proficiencyInput.length<=1},on:{click:function(t){return e.reSet()}}},[a("v-icon",{attrs:{left:""}},[e._v(" mdi-backup-restore ")])],1)],1)],1):e._e()],1)}))],2)],1)],1),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:function(){e.dialog=!1,e.reSet()}}},[e._v(" Close ")]),a("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:e.onSave}},[e._v(" Save ")])],1)],1)],1)],1),a("v-row",{attrs:{justify:"center"}},[a("v-dialog",{attrs:{persistent:"","max-width":"680px"},model:{value:e.editDialog,callback:function(t){e.editDialog=t},expression:"editDialog"}},[a("v-card",{staticClass:"px-6 py-4"},[a("v-card-title",{staticClass:"justify-center"},[a("span",{staticClass:"text-h6"},[a("v-icon",{staticClass:"mr-2",attrs:{large:"",color:"primary"}},[e._v("mdi-translate")]),e._v("Select and Edit Language")],1)]),a("v-card-text",[a("v-container",[a("v-row",[a("v-col",{attrs:{cols:"12"}},[a("v-autocomplete",{attrs:{dense:"",items:e.allAvailableLanguages.map((function(t){return t.coding[0]})),label:"select the Language to edit",filter:e.customFilter,required:"",outlined:"","item-text":"display","return-object":""},scopedSlots:e._u([{key:"item",fn:function(t){return["object"===typeof t.item?[a("v-list-item-content",{domProps:{textContent:e._s(t.item.display)}})]:e._e()]}}]),model:{value:e.selectedLanguageToEdit,callback:function(t){e.selectedLanguageToEdit=t},expression:"selectedLanguageToEdit"}})],1),e._l(e.proficiencySelected,(function(t,i){return a("v-row",{key:i,staticClass:"mx-2"},[a("v-col",{attrs:{cols:"5"}},[a("v-autocomplete",{attrs:{dense:"",label:"proficiency Type",items:e.proficiencyType,outlined:"","item-text":"display","return-object":""},scopedSlots:e._u([{key:"item",fn:function(t){return["object"===typeof t.item?[a("v-list-item-content",{domProps:{textContent:e._s(t.item.display)}})]:e._e()]}}],null,!0),model:{value:t.extension[1].valueCoding,callback:function(i){e.$set(t.extension[1],"valueCoding",i)},expression:"proficiencyData.extension[1].valueCoding"}})],1),a("v-col",{attrs:{cols:"5"}},[a("v-autocomplete",{attrs:{dense:"",items:e.proficiency,label:"Proficiency",outlined:"","item-text":"display","return-object":""},scopedSlots:e._u([{key:"item",fn:function(t){return["object"===typeof t.item?[a("v-list-item-content",{domProps:{textContent:e._s(t.item.display)}})]:e._e()]}}],null,!0),model:{value:t.extension[0].valueCoding,callback:function(i){e.$set(t.extension[0],"valueCoding",i)},expression:"proficiencyData.extension[0].valueCoding"}})],1),i===e.proficiencySelected.length-1?a("v-cols",{attrs:{cols:"2"}},[a("v-row",{staticClass:"mt-4 ml-2"},[a("v-btn",{attrs:{rounded:"",small:"",icon:"",flat:"",color:"primary",disabled:e.proficiencySelected.length>=6},on:{click:e.addProficiencySelected}},[a("v-icon",{attrs:{left:""}},[e._v(" mdi-plus-circle ")])],1),a("v-btn",{attrs:{rounded:"",small:"",icon:"",flat:"",color:"primary",disabled:e.proficiencySelected.length<=1},on:{click:function(t){return e.reSet()}}},[a("v-icon",{attrs:{left:""}},[e._v(" mdi-backup-restore ")])],1)],1)],1):e._e()],1)}))],2)],1)],1),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{color:"warning",error:""},on:{click:function(){e.editDialog=!1}}},[a("v-icon",{attrs:{left:""}},[e._v("mdi-close-box-multiple")]),e._v(" Close ")],1),a("v-btn",{attrs:{color:"primary"},on:{click:e.onUpdate}},[a("v-icon",{attrs:{left:""}},[e._v("mdi-content-save-check-outline")]),e._v(" Save ")],1)],1)],1)],1)],1),a("v-card",[a("v-row",{staticClass:"ma-2 pt-3",attrs:{justify:"end"}},[[a("v-btn",{staticClass:"mr-3",attrs:{color:"primary"},on:{click:function(){t.dialog=!0,t.skillCount=1}}},[a("v-icon",{attrs:{left:""}},[e._v(" mdi-plus-circle ")]),e._v(" Add Language ")],1),a("v-btn",{attrs:{color:"primary",disabled:0===e.tableData.length},on:{click:function(){t.editDialog=!0}}},[a("v-icon",{attrs:{left:""}},[e._v(" mdi-circle-edit-outline ")]),e._v(" Edit Language ")],1)]],2),a("v-card-text",[e.tableData.length>0?a("v-simple-table",{scopedSlots:e._u([{key:"default",fn:function(){return[a("thead",[a("tr",[a("th",{staticClass:"text-left"},[e._v(" Language ")]),a("th",{staticClass:"text-left"},[e._v(" Skill ")]),a("th",{staticClass:"text-left"},[e._v(" Excellent ")]),a("th",{staticClass:"text-left"},[e._v(" Good ")]),a("th",{staticClass:"text-left"},[e._v(" Fair ")]),a("th",{staticClass:"text-left"},[e._v(" Poor ")])])]),e._l(e.tableData,(function(t){return a("tbody",{key:t.name},[a("tr",[a("th",{attrs:{rowspan:"6",scope:"rowgroup"}},[e._v(e._s(t.name))]),a("th",{attrs:{scope:"row"}},[e._v("Expressed signed")]),e._l([0,1,2,3],(function(i){return a("td",{key:i},e._l([0,1,2,3,4,5],(function(s){return a("span",{key:s},[t.skills[s]&&"Expressed signed"===t.skills[s].type&&t.skills[s].level===e.level[i]?a("v-icon",{attrs:{color:"green"}},[e._v("mdi-checkbox-marked-circle-outline")]):a("v-icon")],1)})),0)}))],2),a("tr",[a("th",{attrs:{scope:"row"}},[e._v("Expressed spoken")]),e._l([0,1,2,3],(function(i){return a("td",{key:i},e._l([0,1,2,3,4,5],(function(s){return a("span",{key:s},[t.skills[s]&&"Expressed spoken"===t.skills[s].type&&t.skills[s].level===e.level[i]?a("v-icon",{attrs:{color:"green"}},[e._v("mdi-checkbox-marked-circle-outline")]):a("v-icon")],1)})),0)}))],2),a("tr",[a("th",{attrs:{scope:"row"}},[e._v("Expressed written")]),e._l([0,1,2,3],(function(i){return a("td",{key:i},e._l([0,1,2,3,4,5],(function(s){return a("span",{key:s},[t.skills[s]&&"Expressed written"===t.skills[s].type&&t.skills[s].level===e.level[i]?a("v-icon",{attrs:{color:"green"}},[e._v("mdi-checkbox-marked-circle-outline")]):a("v-icon")],1)})),0)}))],2),a("tr",[a("th",{attrs:{scope:"row"}},[e._v("Received signed")]),e._l([0,1,2,3],(function(i){return a("td",{key:i},e._l([0,1,2,3,4,5],(function(s){return a("span",{key:s},[t.skills[s]&&"Received signed"===t.skills[s].type&&t.skills[s].level===e.level[i]?a("v-icon",{attrs:{color:"green",div:""}},[e._v("mdi-checkbox-marked-circle-outline")]):a("v-icon")],1)})),0)}))],2),a("tr",[a("th",{attrs:{scope:"row"}},[e._v("Received written")]),e._l([0,1,2,3],(function(i){return a("td",{key:i},e._l([0,1,2,3,4,5],(function(s){return a("span",{key:s},[t.skills[s]&&"Received written"===t.skills[s].type&&t.skills[s].level===e.level[i]?a("v-icon",{attrs:{color:"green",div:""}},[e._v("mdi-checkbox-marked-circle-outline")]):a("v-icon")],1)})),0)}))],2),a("tr",[a("th",{attrs:{scope:"row"}},[e._v("Received spoken")]),e._l([0,1,2,3],(function(i){return a("td",{key:i},e._l([0,1,2,3,4,5],(function(s){return a("span",{key:s},[t.skills[s]&&"Received spoken"===t.skills[s].type&&t.skills[s].level===e.level[i]?a("v-icon",{attrs:{color:"green",div:""}},[e._v("mdi-checkbox-marked-circle-outline")]):a("v-icon")],1)})),0)}))],2),a("tr")])}))]},proxy:!0}],null,!1,1009935552)}):a("v-card-title",{staticClass:"justify-center"},[a("span",{staticClass:"text-h6"},[a("v-icon",{staticClass:"mr-2",attrs:{large:"",color:"primary"}},[e._v("mdi-translate")]),e._v("No language data is available please add one ")],1)])],1)],1)],1)},n=[],o=(i("4de4"),i("7db0"),i("caad"),i("c975"),i("d81d"),i("2532"),i("bc3a")),l=i.n(o),c={name:"languageDetail",data:function(){return{valid:!1,skillCount:1,select:null,dialog:!1,skillsList:["Received signed","Expressed signed","Expressed written","Received written","Expressed spoken","Received spoken"],level:["Excellent","Good","Fair","Poor"],tableData:[],languageList:[],filledLanguage:[],proficiency:[],proficiencyType:[],selectedLanguage:null,selectedProficiency:null,selectedProficiencyType:null,proficiencySelected:[],selected:[],required:function(t){return function(e){return e||"You must select a ".concat(t)}},proficiencyInput:[{url:"http://ihris.org/fhir/StructureDefinition/ihris-practitioner-language-proficiency",extension:[{url:"level",valueCoding:{system:"http://terminology.hl7.org/CodeSystem/v3-LanguageAbilityProficiency",version:"",code:"",display:""}},{url:"type",valueCoding:{system:"http://terminology.hl7.org/CodeSystem/v3-LanguageAbilityMode",version:"",code:"",display:""}}]}],allAvailableLanguages:[],selectedLanguageToEdit:null,editDialog:!1}},watch:{selectedLanguageToEdit:function(t){var e=this.allAvailableLanguages.find((function(e){return e.coding[0].code===t.code}));e.extension?this.proficiencySelected=e.extension:this.proficiencySelected=[{url:"http://ihris.org/fhir/StructureDefinition/ihris-practitioner-language-proficiency",extension:[{url:"level",valueCoding:""},{url:"type",valueCoding:""}]}]}},methods:{reSet:function(){this.proficiencyInput=[{url:"http://ihris.org/fhir/StructureDefinition/ihris-practitioner-language-proficiency",extension:[{url:"level",valueCoding:{system:"http://terminology.hl7.org/CodeSystem/v3-LanguageAbilityProficiency",version:"",code:"",display:""}},{url:"type",valueCoding:{system:"http://terminology.hl7.org/CodeSystem/v3-LanguageAbilityMode",version:"",code:"",display:""}}]}]},addProficiency:function(){this.proficiencyInput.push({url:"http://ihris.org/fhir/StructureDefinition/ihris-practitioner-language-proficiency",extension:[{url:"level",valueCoding:""},{url:"type",valueCoding:""}]})},addProficiencySelected:function(){this.proficiencySelected.push({url:"http://ihris.org/fhir/StructureDefinition/ihris-practitioner-language-proficiency",extension:[{url:"level",valueCoding:""},{url:"type",valueCoding:""}]})},customFilter:function(t,e){var i=t.display.toLowerCase(),a=e.toLowerCase();return i.indexOf(a)>-1},onSave:function(){var t=this;this.dialog=!1,l.a.get("/fhir/Practitioner/".concat(this.$router.history.current.params.id)).then((function(e){var i=e.data;void 0===i.communication&&(i.communication=[]),i.communication.push({extension:t.proficiencyInput,coding:[t.selectedLanguage]}),l.a.put("/fhir/Practitioner/".concat(t.$router.history.current.params.id),i).then((function(){t.$router.go()})).catch((function(t){console.log("error",t)}))})).catch((function(t){return console.log(t)}))},onUpdate:function(){var t=this;this.editDialog=!1,l.a.get("/fhir/Practitioner/".concat(this.$router.history.current.params.id)).then((function(e){var i=e.data;i.communication.find((function(e){return e.coding[0].code===t.selectedLanguageToEdit.code})).extension=t.proficiencySelected,l.a.put("/fhir/Practitioner/".concat(t.$router.history.current.params.id),i).then((function(){t.$router.go()})).catch((function(t){console.log("error",t)}))})).catch((function(t){return console.log(t)}))}},created:function(){var t=this;l.a.get("/fhir/Practitioner/".concat(this.$router.history.current.params.id)).then((function(e){e.data&&e.data.communication&&(t.allAvailableLanguages=e.data.communication,e.data.communication.map((function(e){if(e.coding[0].code){t.filledLanguage.push(e.coding[0].code);var i=[];e.extension&&e.extension.length>0&&e.extension.map((function(t){var e={};t.extension&&t.extension[0]&&t.extension[1]&&(e.level=t.extension[0].valueCoding.display,e.type=t.extension[1].valueCoding.display,i.push(e))}));var a={};a.skills=i,a.name=e.coding[0].display,a.skillList=t.skillsList,t.tableData.push(a)}})))})),l.a.get("/fhir/ValueSet/languages/$expand").then((function(e){t.languageList=e.data.expansion.contains,t.languageList=t.languageList.filter((function(e){return!t.filledLanguage.includes(e.code)})),t.languageList.sort((function(t,e){return t.display>e.display?1:e.display>t.display?-1:0}))})),l.a.get("/fhir/ValueSet/v3-LanguageAbilityMode/$expand").then((function(e){return t.proficiencyType=e.data.expansion.contains})).catch((function(t){return console.log(t)})),l.a.get("/fhir/ValueSet/v3-LanguageAbilityProficiency/$expand").then((function(e){return t.proficiency=e.data.expansion.contains})).catch((function(t){return console.log(t)}))}},u=c,d=(i("ae87"),i("2877")),h=i("6544"),p=i.n(h),f=i("c6a6"),m=i("8336"),v=i("b0af"),y=i("99d9"),b=i("62ad"),g=i("a523"),x=i("169a"),k=i("132d"),_=i("5d23"),w=i("0fd9"),V=i("1f4f"),C=i("2fa4"),P=Object(d["a"])(u,r,n,!1,null,"6b049f1c",null),$=P.exports;p()(P,{VAutocomplete:f["a"],VBtn:m["a"],VCard:v["a"],VCardActions:y["a"],VCardText:y["c"],VCardTitle:y["d"],VCol:b["a"],VContainer:g["a"],VDialog:x["a"],VIcon:k["a"],VListItemContent:_["a"],VRow:w["a"],VSimpleTable:V["a"],VSpacer:C["a"]});var D={name:"ihris-section",props:["name","slotProps","title","description","edit","secondary"],components:{"language-detail":$},data:function(){return{}},created:function(){},watch:{},methods:{}},E=D,T=Object(d["a"])(E,a,s,!1,null,null,null);e["default"]=T.exports;p()(T,{VCard:v["a"],VCardText:y["c"],VCardTitle:y["d"]})},e96c:function(t,e,i){"use strict";var a=i("3d3d"),s=i.n(a);s.a},eee9:function(t,e,i){"use strict";i.r(e);var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("ihris-element",{attrs:{edit:t.edit,loading:t.loading},scopedSlots:t._u([{key:"form",fn:function(){return[i("v-select",{attrs:{loading:t.loading,label:t.display,items:t.items.filter((function(t){return!t.code.includes("(deactivated)")})),outlined:"","hide-details":"auto","error-messages":t.errors,"item-text":"display","item-value":"code",disabled:t.disabled,rules:t.rules,dense:""},on:{change:function(e){t.errors=[]}},scopedSlots:t._u([{key:"label",fn:function(){return[t._v(t._s(t.$t("App.fhir-coding."+t.label))+" "),t.required?i("span",{staticClass:"red--text font-weight-bold"},[t._v("*")]):t._e()]},proxy:!0}]),model:{value:t.valueCode,callback:function(e){t.valueCode=e},expression:"valueCode"}})]},proxy:!0},{key:"header",fn:function(){return[t._v(" "+t._s(t.$t("App.fhir-coding."+t.display))+" ")]},proxy:!0},{key:"value",fn:function(){return[t._v(" "+t._s(t.valueDisplay||t.value.display||"")+" ")]},proxy:!0}])})},s=[],r=(i("7db0"),i("b287")),n={name:"fhir-coding",props:["field","label","sliceName","targetprofile","min","max","base-min","base-max","slotProps","path","binding","edit","readOnlyIfSet","constraints"],components:{IhrisElement:r["a"]},data:function(){return{value:{system:"",code:"",display:""},valueCode:"",valueDisplay:"",loading:!0,errors:[],items:[],source:{path:"",data:{},binding:this.binding},disabled:!1,lockWatch:!1}},created:function(){this.setupData()},watch:{slotProps:{handler:function(){this.lockWatch||this.setupData()},deep:!0},valueCode:function(t){var e=this;if(this.items){var i=this.items.find((function(e){return e.code===t}));i&&(this.value=i)}this.value.system&&this.value.code&&this.$fhirutils.codeLookup(this.value.system,this.value.code,this.binding||this.source.binding).then((function(t){e.valueDisplay=t}))}},methods:{setupData:function(){var t=this;if(this.slotProps&&this.slotProps.source){if(this.source={path:this.slotProps.source.path+"."+this.field,data:{},binding:this.binding||this.slotProps.source.binding},this.slotProps.source.fromArray)this.source.data=this.slotProps.source.data,this.source.data&&(this.value=this.source.data,this.valueCode=this.value.code,this.lockWatch=!0);else{var e=this.$fhirutils.pathFieldExpression(this.field);this.source.data=this.$fhirpath.evaluate(this.slotProps.source.data,e),this.source.data[0]&&(this.value=this.source.data[0],this.valueCode=this.value.code,this.lockWatch=!0)}this.disabled=this.readOnlyIfSet&&!!this.valueCode}var i=this.binding||this.slotProps.source.binding;this.$fhirutils.expand(i).then((function(e){t.items=e,t.loading=!1})).catch((function(e){console.log(e),t.errors=e.message,t.loading=!1}))}},computed:{index:function(){return this.slotProps&&this.slotProps.input?this.slotProps.input.index:void 0},display:function(){return this.slotProps&&this.slotProps.input?this.slotProps.input.label:this.label},required:function(){return(this.index||0)<this.min},rules:function(){var t=this;return this.required?[function(e){return!!e||t.display+" is required"}]:[]}}},o=n,l=i("2877"),c=i("6544"),u=i.n(c),d=i("b974"),h=Object(l["a"])(o,a,s,!1,null,null,null);e["default"]=h.exports;u()(h,{VSelect:d["a"]})},fa57:function(t,e,i){"use strict";var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-card",[i("v-card-subtitle",{staticClass:"primary--text text-uppercase font-weight-bold"},[t._v(t._s(t.$t("App.ihris-complex-card."+t.display)))]),t._l(t.errors,(function(e,a){return i("v-card-text",{key:a,staticClass:"error white--text font-weight-bold"},[t._v(t._s(e))])})),i("v-card-text",[t._t("default",null,{source:t.source})],2)],2)},s=[],r={name:"ihris-complex-card",props:["complexField","slotProps","label","errors"],data:function(){return{source:{path:"",data:{}}}},created:function(){this.setupData()},watch:{slotProps:{handler:function(){this.setupData()},deep:!0}},methods:{setupData:function(){if(this.slotProps&&this.slotProps.source)if(this.source={path:this.slotProps.source.path+"."+this.complexField,data:{}},this.slotProps.source.fromArray)this.source.data=this.slotProps.source.data;else{var t=this.$fhirutils.pathFieldExpression(this.complexField);this.source.data=this.$fhirpath.evaluate(this.slotProps.source.data,t)}}},computed:{display:function(){return this.slotProps&&this.slotProps.input?this.slotProps.input.label:this.label}}},n=r,o=i("2877"),l=i("6544"),c=i.n(l),u=i("b0af"),d=i("99d9"),h=Object(o["a"])(n,a,s,!1,null,null,null);e["a"]=h.exports;c()(h,{VCard:u["a"],VCardSubtitle:d["b"],VCardText:d["c"]})}}]);
//# sourceMappingURL=fhir-primary.3fc9b883.js.map