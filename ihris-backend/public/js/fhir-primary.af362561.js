(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["fhir-primary","fhir-name"],{1131:function(t,e,i){"use strict";i.r(e);var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("ihris-element",{attrs:{edit:t.edit,loading:t.loading},scopedSlots:t._u([{key:"form",fn:function(){return[i("v-select",{attrs:{loading:t.loading,label:t.$t("App.fhir-code."+t.display),items:t.items.filter((function(t){return!t.code.includes("(deactivated)")})),outlined:"","hide-details":"auto","error-messages":t.errors,"item-text":"display","item-value":"code",disabled:t.disabled,rules:t.rules,dense:""},on:{change:function(e){t.errors=[]}},scopedSlots:t._u([{key:"label",fn:function(){return[t._v(t._s(t.$t("App.fhir-code."+t.display))+" "),t.required?i("span",{staticClass:"red--text font-weight-bold"},[t._v("*")]):t._e()]},proxy:!0}]),model:{value:t.value,callback:function(e){t.value=e},expression:"value"}})]},proxy:!0},{key:"header",fn:function(){return[t._v(" "+t._s(t.$t("App.fhir-code."+t.display))+" ")]},proxy:!0},{key:"value",fn:function(){return[t._v(" "+t._s(t.displayValue)+" ")]},proxy:!0}])})},r=[],o=(i("7db0"),i("b287")),a={name:"fhir-code",props:["field","min","max","base-min","base-max","label","binding","slotProps","path","edit","sliceName","readOnlyIfSet","constraints"],components:{IhrisElement:o["a"]},data:function(){return{value:"",loading:!0,errors:[],items:[],source:{path:"",data:{},binding:this.binding},disabled:!1,lockWatch:!1}},created:function(){this.setupData()},watch:{slotProps:{handler:function(){this.lockWatch||this.setupData()},deep:!0}},methods:{setupData:function(){var t=this;if(this.slotProps&&this.slotProps.source){if(this.source={path:this.slotProps.source.path+"."+this.field,data:{}},this.slotProps.source.fromArray)this.source.data=this.slotProps.source.data,this.value=this.source.data,this.lockWatch=!0;else{var e=this.$fhirutils.pathFieldExpression(this.field);this.source.data=this.$fhirpath.evaluate(this.slotProps.source.data,e),1==this.source.data.length&&(this.value=this.source.data[0],this.lockWatch=!0)}this.disabled=this.readOnlyIfSet&&!!this.value}var i=this.binding||this.slotProps.source.binding;this.$fhirutils.expand(i).then((function(e){t.items=e,t.loading=!1})).catch((function(e){console.log(e),t.errors.push(e.message),t.loading=!1}))}},computed:{index:function(){return this.slotProps&&this.slotProps.input?this.slotProps.input.index:void 0},display:function(){return this.slotProps&&this.slotProps.input?this.slotProps.input.label:this.label},displayValue:function(){var t=this,e=this.items.find((function(e){return e.code===t.value}));return e?e.display:""},required:function(){return(this.index||0)<this.min},rules:function(){var t=this;return this.required?[function(e){return!!e||t.display+" is required"}]:[]}}},s=a,l=i("2877"),c=i("6544"),u=i.n(c),d=i("b974"),h=Object(l["a"])(s,n,r,!1,null,null,null);e["default"]=h.exports;u()(h,{VSelect:d["a"]})},"16ce":function(t,e,i){"use strict";var n=i("eb7d"),r=i.n(n);r.a},"1da1":function(t,e,i){"use strict";i.d(e,"a",(function(){return r}));i("d3b7"),i("e6cf");function n(t,e,i,n,r,o,a){try{var s=t[o](a),l=s.value}catch(c){return void i(c)}s.done?e(l):Promise.resolve(l).then(n,r)}function r(t){return function(){var e=this,i=arguments;return new Promise((function(r,o){var a=t.apply(e,i);function s(t){n(a,r,o,s,l,"next",t)}function l(t){n(a,r,o,s,l,"throw",t)}s(void 0)}))}}},"309c":function(t,e,i){"use strict";i.r(e);var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[t._t("default",null,{source:t.source})],2)},r=[],o={name:"fhir-codeable-concept",props:["field","slotProps","sliceName","min","max","base-min","base-max","label","path","binding","edit","constraints"],data:function(){return{source:{path:"",data:{},binding:this.binding},errors:[]}},created:function(){this.setupData()},watch:{slotProps:{handler:function(){this.setupData()},deep:!0}},methods:{setupData:function(){if(this.slotProps&&this.slotProps.source)if(this.source={path:this.slotProps.source.path+"."+this.field,data:{},binding:this.binding},this.slotProps.source.fromArray)this.source.data=this.slotProps.source.data;else{var t=this.$fhirutils.pathFieldExpression(this.field);this.source.data=this.$fhirpath.evaluate(this.slotProps.source.data,t)}}},computed:{display:function(){return this.slotProps&&this.slotProps.input?this.slotProps.input.label:this.label}}},a=o,s=i("2877"),l=Object(s["a"])(a,n,r,!1,null,null,null);e["default"]=l.exports},"39e1":function(t,e,i){"use strict";i.r(e);var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return t.edit?t._e():i("v-container",{staticClass:"my-3"},[i("v-data-table",{staticClass:"elevation-1",attrs:{headers:t.translatedHeader,items:t.items,"item-key":"id","items-per-page":5,loading:t.loading,dense:"","footer-props":{"items-per-page-text":t.$t("App.ihris-search.tableText"),"items-per-page-options":[5,10,20,50]}},scopedSlots:t._u([{key:"top",fn:function(){return[i("v-toolbar",{attrs:{flat:"",color:"white"}},[i("v-toolbar-title",[t._v(" "+t._s(t.$t("App.ihris-secondary."+t.title))+" ")]),i("v-spacer"),t._l(t.topActions,(function(e){return i("v-btn",{key:e.text,attrs:{to:t.setupLink(e.link,{}),color:e.class,small:""}},[t._v(" "+t._s(t.$t("App.ihris-secondary."+e.text))+" ")])}))],2)]},proxy:!0},{key:"item._action",fn:function(e){var n=e.item;return t._l(n.actions,(function(e){return i("v-btn",{key:e.text,attrs:{to:t.setupLink(e.link,n),color:e.class,small:"",rounded:""}},[t._v(" "+t._s(e.text)+" ")])}))}}],null,!1,4170917870)})],1)},r=[],o=(i("a623"),i("4de4"),i("7db0"),i("c975"),i("a15b"),i("d81d"),i("d3b7"),i("ac1f"),i("3ca3"),i("5319"),i("1276"),i("9911"),i("ddb0"),i("b85c")),a=(i("96cf"),i("1da1")),s=function(t){return!!t&&t.constructor===Object},l={name:"ihris-secondary",props:["title","field","profile","slotProps","link-id","link-field","search-field","edit","columns","actions"],data:function(){return{source:{data:{},path:this.field},empty:!0,items:[],loading:!0,topActions:[],translatedHeader:[]}},mounted:function(){this.setupData()},watch:{},methods:{setupData:function(){var t,e=this;if(this.translatedHeader=this.columns.map((function(t){return{text:e.$t("App.ihris-secondary.table.".concat(t.text)),value:t.value}})),2===this.searchField.split(":").length){var i=this.searchField.split(":")[0];t="fhir/"+i+"?_id="+this.linkId+"&_include="+this.searchField}else{t="/fhir/"+this.field;var n=[];this.profile&&n.push("_profile="+this.profile),this.searchField?n.push(this.searchField+"="+this.linkId):n.push(this.linkField.substring(this.linkField.indexOf(".")+1)+"="+this.linkId),t+="?"+n.join("&")}this.items=[],this.loading=!0,this.addItems(t)},addItems:function(t){var e=this;fetch(t).then((function(i){200===i.status?i.json().then(function(){var t=Object(a["a"])(regeneratorRuntime.mark((function t(i){var n,r,a,s,l,c,u,d,h,p,f,v,m,g,y,b,x;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!(i.entry&&i.entry.length>0)){t.next=52;break}n=Object(o["a"])(i.entry),t.prev=2,n.s();case 4:if((r=n.n()).done){t.next=42;break}if(a=r.value,2!==e.searchField.split(":").length||a.resource.resourceType!==e.searchField.split(":")[0]){t.next=8;break}return t.abrupt("continue",40);case 8:s={id:a.resource.id},l=Object(o["a"])(e.columns),t.prev=10,l.s();case 12:if((c=l.n()).done){t.next=28;break}if(u=c.value,"_action"!==u.value){t.next=16;break}return t.abrupt("continue",26);case 16:return t.prev=16,d=e.$fhirpath.evaluate(a.resource,u.value),t.next=20,e.processContent(d);case 20:s[u.value]=t.sent,t.next=26;break;case 23:t.prev=23,t.t0=t["catch"](16),console.log(t.t0);case 26:t.next=12;break;case 28:t.next=33;break;case 30:t.prev=30,t.t1=t["catch"](10),l.e(t.t1);case 33:return t.prev=33,l.f(),t.finish(33);case 36:s.actions||(s.actions=[]),h=Object(o["a"])(e.actions);try{for(h.s();!(p=h.n()).done;)f=p.value,f.row?f.condition?(v=e.$fhirpath.evaluate(a.resource,f.condition),v.every((function(t){return t}))&&s.actions.push(f)):s.actions.push(f):f.condition?(m=e.$fhirpath.evaluate(a.resource,f.condition),f.hasOwnProperty("meets")?f.meets=f.meets&&m.every((function(t){return t})):f.meets=m.every((function(t){return t}))):f.meets=!0}catch(_){h.e(_)}finally{h.f()}e.items.push(s);case 40:t.next=4;break;case 42:t.next=47;break;case 44:t.prev=44,t.t2=t["catch"](2),n.e(t.t2);case 47:return t.prev=47,n.f(),t.finish(47);case 50:t.next=54;break;case 52:g=Object(o["a"])(e.actions);try{for(g.s();!(y=g.n()).done;)b=y.value,b.row||(b.meets=b.emptyDisplay)}catch(_){g.e(_)}finally{g.f()}case 54:e.topActions=e.actions.filter((function(t){return!t.row&&t.meets})),i.link?(x=i.link.find((function(t){return"next"===t.relation})),x?e.addItems(x.url):e.loading=!1):e.loading=!1;case 56:case"end":return t.stop()}}),t,null,[[2,44,47,50],[10,30,33,36],[16,23]])})));return function(e){return t.apply(this,arguments)}}()).catch((function(t){e.loading=!1,console.log(t)})):(e.loading=!1,console.log("Unable to fetch",t,i.status))})).catch((function(t){e.loading=!1,console.log(t)}))},processContent:function(){var t=Object(a["a"])(regeneratorRuntime.mark((function t(e){var i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!Array.isArray(e)){t.next=7;break}return t.next=3,Promise.all(e.map(this.processContent));case 3:return i=t.sent,t.abrupt("return",i.join(" "));case 7:if(!s(e)){t.next=32;break}if(!e.code||!e.system){t.next=14;break}return t.next=11,this.$fhirutils.codeLookup(e.system,e.code);case 11:return t.abrupt("return",t.sent);case 14:if(!e.display){t.next=18;break}return t.abrupt("return",e.display);case 18:if(!e.code){t.next=22;break}return t.abrupt("return",e.code);case 22:if(!e.reference){t.next=28;break}return t.next=25,this.$fhirutils.resourceLookup(e.reference);case 25:return t.abrupt("return",t.sent);case 28:return console.log("Unable to process content:",e),t.abrupt("return","Unknown");case 30:t.next=33;break;case 32:return t.abrupt("return",e);case 33:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}(),setupLink:function(t,e){return t.replace("ITEMID",e.id).replace("FHIRID",this.linkId)}}},c=l,u=(i("e96c"),i("2877")),d=i("6544"),h=i.n(d),p=i("8336"),f=i("a523"),v=i("8fea"),m=i("2fa4"),g=i("71d9"),y=i("2a7f"),b=Object(u["a"])(c,n,r,!1,null,null,null);e["default"]=b.exports;h()(b,{VBtn:p["a"],VContainer:f["a"],VDataTable:v["a"],VSpacer:m["a"],VToolbar:g["a"],VToolbarTitle:y["a"]})},"3d3d":function(t,e,i){},"6b10":function(t,e,i){"use strict";i.r(e);var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[t._t("default",null,{source:t.source})],2)},r=[],o=(i("ac1f"),i("5319"),{name:"fhir-extension",props:["field","sliceName","min","max","base-min","base-max","profile","slotProps","path","edit","constraints"],data:function(){return{source:{path:"",data:[]},errors:[]}},created:function(){this.setupData()},watch:{slotProps:{handler:function(){this.setupData()},deep:!0}},methods:{setupData:function(){if(this.slotProps&&this.slotProps.source)if(this.source={path:this.slotProps.source.path+"."+this.field,data:{}},this.slotProps.source.fromArray)this.source.data=this.slotProps.source.data;else{var t;t=this.profile?this.profile:this.sliceName;var e=this.field.replace(/([^:]+):(.+)/,"$1.where(url='"+t+"')");this.source.data=this.$fhirpath.evaluate(this.slotProps.source.data,e)}}}}),a=o,s=i("2877"),l=Object(s["a"])(a,n,r,!1,null,null,null);e["default"]=l.exports},"6dbd":function(t,e,i){"use strict";i.r(e);var n=function(){var t=this,e=this,i=e.$createElement,n=e._self._c||i;return!e.intro.closed&&this.intro.fullName?n("div",{class:[e.hasScrolled||this.isQuestionnaire?"show":"hide"],staticStyle:{padding:"0"}},[n("v-snackbar",{attrs:{color:"white",bottom:e.bottom,right:e.right,timeout:e.timeout,width:"320"},model:{value:e.snackbar,callback:function(t){e.snackbar=t},expression:"snackbar"}},[n("div",[n("v-card",{attrs:{height:"400",elevation:"0",width:"320"}},[n("template",{slot:"progress"},[n("v-progress-linear",{attrs:{color:"deep-purple",height:"10",indeterminate:""}})],1),n("v-card-title",{staticClass:"justify-end",staticStyle:{"padding-top":"4px","padding-bottom":"4px"}},[n("v-btn",{attrs:{color:"deep-purple lighten-2",icon:""},on:{click:function(){t.intro.closed=!0}}},[n("v-icon",[e._v("mdi-close-circle-outline")])],1)],1),n("v-card-title",{staticClass:"justify-center",staticStyle:{"padding-top":"4px","padding-bottom":"4px"}},[n("v-avatar",{attrs:{size:"120"}},[n("img",{attrs:{alt:e.intro.fullName,src:e.intro.photoURL?e.intro.photoURL:"/images/Blank-Avatar.jpg"}})])],1),n("v-card-title",{staticClass:"justify-center py-0"},[n("span",[e._v(e._s(e.intro.fullName))])]),n("v-card-text",[n("span",[e._v(e._s(e.$t("App.intro.Job_Title"))+": "),n("strong",[e._v(e._s(e.intro.jobTitle))])]),n("br"),n("span",[e._v(e._s(e.$t("App.intro.employer_number"))+": "),n("strong",[e._v(e._s(e.intro.employeeID))])]),n("br"),n("span",[e._v(e._s(e.$t("App.intro.email"))+": "),n("strong",[e._v(e._s(e.intro.email))])]),n("br"),n("span",[e._v(e._s(e.$t("App.intro.phone"))+" : "),n("strong",[e._v(e._s(e.intro.phone))])]),n("br"),n("span",[e._v(e._s(e.$t("App.intro.gender"))+" : "),n("strong",[e._v(e._s(e.intro.gender))])]),n("br"),n("span",[e._v(e._s(e.$t("App.intro.date-of-birth"))+" : "),n("strong",[e._v(e._s(e.intro.birthDate))])]),n("br"),n("span",[e._v(" "+e._s(e.$t("App.intro.age"))+" : "),n("strong",[e._v(e._s(Math.floor((new Date-new Date(e.intro.birthDate))/31536e6)))])]),n("br")])],2)],1)])],1):e._e()},r=[],o=(i("99af"),i("7db0"),i("b0c0"),i("d3b7"),i("3ca3"),i("ddb0"),i("2b3d"),{name:"ihris-practitioner-intro",props:["slotProps","isQuestionnaire","position"],data:function(){return{intro:{fullName:"",jobTitle:"",photoURL:"",birthDate:"",gender:"",employeeID:"",closed:!1,emil:"",phone:""},hasScrolled:!1,snackbar:!0,timeout:0,bottom:!0,right:!0}},components:{},mounted:function(){this.isQuestionnaire?window.removeEventListener("scroll",this.handleScroll):window.addEventListener("scroll",this.handleScroll)},beforeDestroy:function(){window.removeEventListener("scroll",this.handleScroll)},watch:{slotProps:{handler:function(){this.lockWatch||this.setupData()},deep:!0}},methods:{setupData:function(){var t=this;if(this.slotProps&&this.slotProps.source&&this.slotProps.source.data){var e,i,n,r,o,a,s,l,c,u=this.slotProps.source.data,d="";u&&(null===(e=u.name[0])||void 0===e?void 0:e.prefix)&&(null===(i=u.name[0])||void 0===i?void 0:i.prefix.length)&&(d=u.name[0].prefix[0]),this.intro.fullName="".concat(d," ").concat(null===u||void 0===u||null===(n=u.name[0])||void 0===n?void 0:n.given[0]," ").concat(null===u||void 0===u||null===(r=u.name[0])||void 0===r?void 0:r.family),this.intro.email=null===u||void 0===u||null===(o=u.telecom)||void 0===o||null===(a=o.find((function(t){return"email"===t.system})))||void 0===a?void 0:a.value,this.intro.phone=null===u||void 0===u||null===(s=u.telecom)||void 0===s||null===(l=s.find((function(t){return"phone"===t.system})))||void 0===l?void 0:l.value,this.intro.jobTitle=this.slotProps.position,this.intro.gender=null===u||void 0===u?void 0:u.gender,this.intro.birthDate=null===u||void 0===u?void 0:u.birthDate,this.intro.employeeID=(null===u||void 0===u?void 0:u.identifier)?null===u||void 0===u||null===(c=u.identifier[0])||void 0===c?void 0:c.value:"";var h="";if(u.photo&&(h=null===u||void 0===u?void 0:u.photo[0]),h.data&&h.contentType){var p="data:"+h.contentType+";base64,"+h.data;fetch(p).then((function(t){return t.blob()})).then((function(e){t.intro.photoURL=URL.createObjectURL(e)})).catch((function(t){console.log("Failed to get data from base64.",t)}))}}},handleScroll:function(){this.hasScrolled=window.top.scrollY>=100}}}),a=o,s=(i("16ce"),i("2877")),l=i("6544"),c=i.n(l),u=i("8212"),d=i("8336"),h=i("b0af"),p=i("99d9"),f=i("132d"),v=i("8e36"),m=i("2db4"),g=Object(s["a"])(a,n,r,!1,null,"7cd1196d",null);e["default"]=g.exports;c()(g,{VAvatar:u["a"],VBtn:d["a"],VCard:h["a"],VCardText:p["c"],VCardTitle:p["d"],VIcon:f["a"],VProgressLinear:v["a"],VSnackbar:m["a"]})},7372:function(t,e,i){"use strict";i.r(e);var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-container",{staticClass:"my-3"},[i("v-form",{ref:"form",model:{value:t.valid,callback:function(e){t.valid=e},expression:"valid"}},[t._t("default",null,{position:t.position,source:t.source}),i("v-overlay",{attrs:{value:t.overlay}},[i("v-progress-circular",{attrs:{color:"primary",indeterminate:"",size:"50"}})],1),i("v-navigation-drawer",{staticClass:"primary darken-1 white--text",staticStyle:{"z-index":"3"},attrs:{app:"",clipped:"",permanent:"",right:""}},[i("v-list",{staticClass:"white--text"},[t.$router.history.current.path==="/resource/view/practitioner/"+this.fhirId?i("v-list-item",[i("v-btn",{staticClass:"primary",attrs:{loading:t.loadingId},on:{click:t.printEmployeeId},scopedSlots:t._u([{key:"loader",fn:function(){return[i("span",{staticClass:"custom-loader"},[i("v-icon",{attrs:{light:""}},[t._v("mdi-cached")])],1)]},proxy:!0}],null,!1,1919056595)},[i("v-icon",{staticClass:"mr-2",attrs:{right:""}},[t._v(" mdi-card-account-details-outline ")]),t._v(" "+t._s(t.$t("App.ihris-resource.GenerateId"))+" ")],1)],1):t._e(),t.$router.history.current.path==="/resource/view/practitioner/"+this.fhirId?i("v-list-item",[i("v-btn",{staticClass:"primary",attrs:{loading:t.loadingCv},on:{click:t.printEmployeeCv},scopedSlots:t._u([{key:"loader",fn:function(){return[i("span",{staticClass:"custom-loader"},[i("v-icon",{attrs:{light:""}},[t._v("mdi-cached")])],1)]},proxy:!0}],null,!1,1919056595)},[i("v-icon",{staticClass:"mr-2",attrs:{dark:"",right:""}},[t._v(" mdi-file-pdf-box")]),t._v(" "+t._s(t.$t("App.ihris-resource.GenerateCv"))+" ")],1)],1):t._e(),i("v-list-item",[t.edit?i("v-btn",{staticClass:"secondary",attrs:{dark:""},on:{click:function(e){return t.$router.go(0)}}},[i("v-icon",{attrs:{light:""}},[t._v("mdi-close-circle-outline")]),i("span",[t._v(t._s(t.$t("App.ihris-resource.Cancel")))])],1):i("v-btn",{staticClass:"secondary",attrs:{dark:""},on:{click:function(e){return t.$emit("set-edit",!t.edit)}}},[i("v-icon",{attrs:{light:""}},[t._v("mdi-pencil")]),i("span",[t._v(t._s(t.$t("App.ihris-resource.Edit")))])],1),i("v-spacer"),t.edit?[t.valid?i("v-btn",{staticClass:"success darken-1",attrs:{disabled:!t.valid,dark:""},on:{click:function(e){return t.processFHIR()}}},[i("v-icon",{attrs:{light:""}},[t._v("mdi-content-save")]),i("span",[t._v(t._s(t.$t("App.ihris-resource.Save")))])],1):i("v-btn",{staticClass:"warning",attrs:{dark:""},on:{click:function(e){return t.$refs.form.validate()}}},[i("v-icon",{attrs:{light:""}},[t._v("mdi-content-save")]),i("span",[t._v(t._s(t.$t("App.ihris-resource.Save")))])],1)]:t._e()],2),i("v-divider",{attrs:{color:"white"}}),!t.edit&&t.links&&t.links.length?t._l(t.links,(function(e,n){return i("v-list-item",{key:e.url},[i("v-btn",{key:e.url,staticClass:"primary",attrs:{text:!e.button,to:t.getLinkUrl(e)}},[e.icon?i("v-icon",{attrs:{light:""}},[t._v(t._s(e.icon))]):t._e(),t._v(" "+t._s(t.linktext[n])+" ")],1)],1)})):t._e(),t.sectionMenu?i("v-subheader",{staticClass:"white--text"},[i("h2",[t._v(t._s(t.$t("App.ihris-resource.Sections")))])]):t._e(),t._l(t.sectionMenu,(function(e){return i("v-list-item",{key:e.name,class:"#section-"+e.name===t.path?"highlighted":"",attrs:{href:"#section-"+e.name}},[t.edit&&e.secondary?t._e():i("v-list-item-content",{staticClass:"white--text"},[i("v-list-item-title",{staticClass:"text-uppercase"},[i("h4",[t._v(t._s(t.$t("App.ihris-resource."+e.title)))])]),i("v-list-item-subtitle",{staticClass:"white--text"},[t._v(t._s(t.$t("App.ihris-resource."+e.desc))+" ")])],1)],1)}))],2)],1)],2)],1)},r=[],o=(i("caad"),i("d81d"),i("fb6a"),i("b0c0"),i("b64b"),i("d3b7"),i("ac1f"),i("2532"),i("3ca3"),i("5319"),i("1276"),i("2ca0"),i("ddb0"),i("2b3d"),i("96cf"),i("1da1")),a=i("b85c"),s=i("bc3a"),l=i.n(s),c={name:"ihris-resource",props:["title","field","fhir-id","page","profile","section-menu","edit","links","constraints"],data:function(){return{fhir:{},orig:{},valid:!0,source:{data:{},path:""},path:"",loading:!1,overlay:!1,isEdit:!1,linktext:[],position:"",advancedValid:!0,loadingId:!1,loadingCv:!1}},mounted:function(){this.isQuestionnaire?window.removeEventListener("scroll",this.handleScroll):window.addEventListener("scroll",this.handleScroll)},beforeDestroy:function(){window.removeEventListener("scroll",this.handleScroll)},created:function(){var t=this;if(this.fhirId)this.loading=!0,fetch("/fhir/PractitionerRole?_practitioner=".concat(this.fhirId)).then((function(e){e.json().then((function(e){if(e.entry){var i=e.entry[0].resource.code[0].coding[0].display;t.position=i||""}})).catch((function(e){console.log(t.field,t.fhirId,e)}))})).catch((function(e){console.log(t.field,t.fhirId,e)})),fetch("/fhir/"+this.field+"/"+this.fhirId).then((function(e){e.json().then((function(e){t.orig=e,t.source={data:e,path:t.field},t.setLinkText(),t.loading=!1})).catch((function(e){console.log(t.field,t.fhirId,e)}))})).catch((function(e){console.log(t.field,t.fhirId,e)}));else if(this.$route.query){for(var e={resourceType:this.field},i=!1,n=0,r=Object.keys(this.$route.query);n<r.length;n++){var o=r[n];if(o.startsWith(this.field+".")){i=!0;var s,l=o.substring(this.field.length+1).split("."),c=l.pop(),u=e,d=Object(a["a"])(l);try{for(d.s();!(s=d.n()).done;){var h=s.value;if(h.includes("["))try{var p=h.split("["),f=p[0],v=p[1].slice(0,-1);if(u.hasOwnProperty(f)||(u[f]=[]),v){var m={};u[f][parseInt(v)]=m,u=m}else{var g={};u[f].push(g),u=g}}catch(_){console.log("Unable to process",o)}else u.hasOwnProperty(h)||(u[h]={},u=u[h])}}catch(_){d.e(_)}finally{d.f()}if(c.includes("["))try{var y=c.split("["),b=y[0],x=y[1].slice(0,-1);u.hasOwnProperty(b)||(u[b]=[]),x?u[b][parseInt(x)]=this.$route.query[o]:u[b].push(this.$route.query[o])}catch(_){console.log("Unable to process",o)}else u[c]=this.$route.query[o]}}i&&(this.source={data:e,path:this.field})}},computed:{hasFhirId:function(){return""!=this.fhirId&&!!this.fhirId}},methods:{handleScroll:function(){var t=this;this.hasScrolled=window.top.scrollY>=100,this.sectionMenu.map((function(e){var i=document.getElementById("section-".concat(e.name)),n=i.offsetTop;pageYOffset>=n&&(t.path="#section-".concat(e.name))}))},getLinkField:function(t){var e=this.$fhirpath.evaluate(this.source.data,t);return!!e&&e[0]},getLinkUrl:function(t){var e;if(t.field&&(e=this.getLinkField(t.field)),e){if(e.includes("/")){var i=e.split("/");e=i[1]}return t.url.replace("FIELD",e)}return t.url},setLinkText:function(){var t=this,e=function(e){var i=t.links[e];if(i.text)t.linktext[e]=i.text;else if(i.field){var n=t.getLinkField(i.field);n&&t.$fhirutils.lookup(n).then((function(i){t.$set(t.linktext,e,i)}))}};for(var i in this.links)e(i)},processFHIR:function(){var t=Object(o["a"])(regeneratorRuntime.mark((function t(){var e,i,n,r=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(this.$refs.form.validate(),this.valid){t.next=3;break}return t.abrupt("return");case 3:return this.advancedValid=!0,this.overlay=!0,this.loading=!0,e=function(){var t=Object(o["a"])(regeneratorRuntime.mark((function t(i,n,o){var s,l,c,u,d,h,p;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:s=Object(a["a"])(o),t.prev=1,s.s();case 3:if((l=s.n()).done){t.next=36;break}if(c=l.value,u=i,d=n,c.field&&!c.fieldType&&(h=void 0,c.sliceName?c.field.startsWith("value[x]")?(h=c.field.substring(9),u+="."+h):(h=c.field.replace(":"+c.sliceName,""),u+="."+h):(h=c.field,u+="."+h),"1"!==c.max||"1"!==c.baseMax?n.hasOwnProperty(h)||(d[h]=[]):d[h]={},c.hasOwnProperty("value")?(Array.isArray(d[h])?d[h].push(c.value):d[h]=c.value,d=d[h]):Array.isArray(d[h])?(p={},c.profile?p.url=c.profile:"extension"===h&&c.sliceName&&(p.url=c.sliceName),d[h].push(p),d=p):d=d[h]),!c.$children){t.next=18;break}return t.prev=9,t.next=12,e(u,d,c.$children);case 12:t.next=18;break;case 14:t.prev=14,t.t0=t["catch"](9),r.advancedValid=!1,console.log(t.t0);case 18:if(!c.constraints){t.next=34;break}if(c.errors=[],t.prev=20,t.t1=r.advancedValid,!t.t1){t.next=26;break}return t.next=25,r.$fhirutils.checkConstraints(c.constraints,r.constraints,d,c.errors,r.fhirId);case 25:t.t1=t.sent;case 26:r.advancedValid=t.t1,t.next=34;break;case 29:t.prev=29,t.t2=t["catch"](20),r.advancedValid=!1,c.errors.push("An unknown error occurred."),console.log(t.t2);case 34:t.next=3;break;case 36:t.next=41;break;case 38:t.prev=38,t.t3=t["catch"](1),s.e(t.t3);case 41:return t.prev=41,s.f(),t.finish(41);case 44:case"end":return t.stop()}}),t,null,[[1,38,41,44],[9,14],[20,29]])})));return function(e,i,n){return t.apply(this,arguments)}}(),this.fhir={resourceType:this.field,meta:{profile:[this.profile]}},t.prev=8,t.next=11,e(this.field,this.fhir,this.$children);case 11:t.next=17;break;case 13:t.prev=13,t.t0=t["catch"](8),this.advancedValid=!1,console.log(t.t0);case 17:if(this.advancedValid){t.next=22;break}return this.overlay=!1,this.loading=!1,this.$store.commit("setMessage",{type:"error",text:"There were errors on the form."}),t.abrupt("return");case 22:console.log("FINISHED PROCESS AND CHECK."),i="/fhir/"+this.field,n={method:"POST",headers:{"Content-Type":"application/fhir+json"},redirect:"manual"},this.fhirId&&(this.fhir.id=this.fhirId,i+="/"+this.fhirId,n.method="PUT"),n.body=JSON.stringify(this.fhir),fetch(i,n).then((function(t){201!==t.status&&200!==t.status||t.json().then((function(t){r.overlay=!1,r.loading=!1,r.fhirId?(r.$store.commit("setMessage",{type:"success",text:"Update successful."}),setTimeout((function(){return r.$router.go(0)}),1e3)):r.$router.push({name:"resource_view",params:{page:r.page,id:t.id}})}))}));case 28:case"end":return t.stop()}}),t,this,[[8,13]])})));function e(){return t.apply(this,arguments)}return e}(),printEmployeeId:function(){var t=this;this.loadingId=!0,l()({url:"/config/employeeId/".concat(this.fhirId),method:"GET",responseType:"blob"}).then((function(e){var i=new Blob([e.data],{type:"application/png"}),n=document.createElement("a");n.href=window.URL.createObjectURL(i),n.download="employee_identification_card_".concat(t.fhirId,".png"),n.click(),t.loadingId=!1})).catch((function(e){console.log(e),t.loadingId=!1}))},printEmployeeCv:function(){var t=this;this.loadingCv=!0,l()({url:"/config/employeeCv/".concat(this.fhirId),method:"GET",responseType:"blob"}).then((function(e){var i=new Blob([e.data],{type:"application/pdf"}),n=document.createElement("a");n.href=window.URL.createObjectURL(i),n.download="employee_resume_".concat(t.fhirId,".pdf"),n.click(),t.loadingCv=!1})).catch((function(e){console.log(e),t.loadingCv=!1}))}}},u=c,d=(i("7f06"),i("2877")),h=i("6544"),p=i.n(h),f=i("8336"),v=i("a523"),m=i("ce7e"),g=i("4bd4"),y=i("132d"),b=i("8860"),x=i("da13"),_=i("5d23"),k=i("f774"),w=i("a797"),C=i("490a"),P=i("2fa4"),L=i("e0c7"),$=Object(d["a"])(u,n,r,!1,null,null,null);e["default"]=$.exports;p()($,{VBtn:f["a"],VContainer:v["a"],VDivider:m["a"],VForm:g["a"],VIcon:y["a"],VList:b["a"],VListItem:x["a"],VListItemContent:_["a"],VListItemSubtitle:_["b"],VListItemTitle:_["c"],VNavigationDrawer:k["a"],VOverlay:w["a"],VProgressCircular:C["a"],VSpacer:P["a"],VSubheader:L["a"]})},"7f06":function(t,e,i){"use strict";var n=i("9090"),r=i.n(n);r.a},"89c1":function(t,e,i){"use strict";i.r(e);var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("ihris-complex-card",{attrs:{complexField:t.field,slotProps:t.slotProps,label:t.label,errors:t.errors},scopedSlots:t._u([{key:"default",fn:function(e){return[t._t("default",null,{source:e.source})]}}],null,!0)})},r=[],o=i("fa57"),a={name:"fhir-human-name",props:["field","slotProps","sliceName","min","max","base-min","base-max","label","path","edit","constraints"],data:function(){return{errors:[]}},components:{IhrisComplexCard:o["a"]}},s=a,l=i("2877"),c=Object(l["a"])(s,n,r,!1,null,null,null);e["default"]=c.exports},9090:function(t,e,i){},"96cf":function(t,e,i){var n=function(t){"use strict";var e,i=Object.prototype,n=i.hasOwnProperty,r="function"===typeof Symbol?Symbol:{},o=r.iterator||"@@iterator",a=r.asyncIterator||"@@asyncIterator",s=r.toStringTag||"@@toStringTag";function l(t,e,i,n){var r=e&&e.prototype instanceof v?e:v,o=Object.create(r.prototype),a=new S(n||[]);return o._invoke=C(t,i,a),o}function c(t,e,i){try{return{type:"normal",arg:t.call(e,i)}}catch(n){return{type:"throw",arg:n}}}t.wrap=l;var u="suspendedStart",d="suspendedYield",h="executing",p="completed",f={};function v(){}function m(){}function g(){}var y={};y[o]=function(){return this};var b=Object.getPrototypeOf,x=b&&b(b(E([])));x&&x!==i&&n.call(x,o)&&(y=x);var _=g.prototype=v.prototype=Object.create(y);function k(t){["next","throw","return"].forEach((function(e){t[e]=function(t){return this._invoke(e,t)}}))}function w(t,e){function i(r,o,a,s){var l=c(t[r],t,o);if("throw"!==l.type){var u=l.arg,d=u.value;return d&&"object"===typeof d&&n.call(d,"__await")?e.resolve(d.__await).then((function(t){i("next",t,a,s)}),(function(t){i("throw",t,a,s)})):e.resolve(d).then((function(t){u.value=t,a(u)}),(function(t){return i("throw",t,a,s)}))}s(l.arg)}var r;function o(t,n){function o(){return new e((function(e,r){i(t,n,e,r)}))}return r=r?r.then(o,o):o()}this._invoke=o}function C(t,e,i){var n=u;return function(r,o){if(n===h)throw new Error("Generator is already running");if(n===p){if("throw"===r)throw o;return I()}i.method=r,i.arg=o;while(1){var a=i.delegate;if(a){var s=P(a,i);if(s){if(s===f)continue;return s}}if("next"===i.method)i.sent=i._sent=i.arg;else if("throw"===i.method){if(n===u)throw n=p,i.arg;i.dispatchException(i.arg)}else"return"===i.method&&i.abrupt("return",i.arg);n=h;var l=c(t,e,i);if("normal"===l.type){if(n=i.done?p:d,l.arg===f)continue;return{value:l.arg,done:i.done}}"throw"===l.type&&(n=p,i.method="throw",i.arg=l.arg)}}}function P(t,i){var n=t.iterator[i.method];if(n===e){if(i.delegate=null,"throw"===i.method){if(t.iterator["return"]&&(i.method="return",i.arg=e,P(t,i),"throw"===i.method))return f;i.method="throw",i.arg=new TypeError("The iterator does not provide a 'throw' method")}return f}var r=c(n,t.iterator,i.arg);if("throw"===r.type)return i.method="throw",i.arg=r.arg,i.delegate=null,f;var o=r.arg;return o?o.done?(i[t.resultName]=o.value,i.next=t.nextLoc,"return"!==i.method&&(i.method="next",i.arg=e),i.delegate=null,f):o:(i.method="throw",i.arg=new TypeError("iterator result is not an object"),i.delegate=null,f)}function L(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function $(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function S(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(L,this),this.reset(!0)}function E(t){if(t){var i=t[o];if(i)return i.call(t);if("function"===typeof t.next)return t;if(!isNaN(t.length)){var r=-1,a=function i(){while(++r<t.length)if(n.call(t,r))return i.value=t[r],i.done=!1,i;return i.value=e,i.done=!0,i};return a.next=a}}return{next:I}}function I(){return{value:e,done:!0}}return m.prototype=_.constructor=g,g.constructor=m,g[s]=m.displayName="GeneratorFunction",t.isGeneratorFunction=function(t){var e="function"===typeof t&&t.constructor;return!!e&&(e===m||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,g):(t.__proto__=g,s in t||(t[s]="GeneratorFunction")),t.prototype=Object.create(_),t},t.awrap=function(t){return{__await:t}},k(w.prototype),w.prototype[a]=function(){return this},t.AsyncIterator=w,t.async=function(e,i,n,r,o){void 0===o&&(o=Promise);var a=new w(l(e,i,n,r),o);return t.isGeneratorFunction(i)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},k(_),_[s]="Generator",_[o]=function(){return this},_.toString=function(){return"[object Generator]"},t.keys=function(t){var e=[];for(var i in t)e.push(i);return e.reverse(),function i(){while(e.length){var n=e.pop();if(n in t)return i.value=n,i.done=!1,i}return i.done=!0,i}},t.values=E,S.prototype={constructor:S,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach($),!t)for(var i in this)"t"===i.charAt(0)&&n.call(this,i)&&!isNaN(+i.slice(1))&&(this[i]=e)},stop:function(){this.done=!0;var t=this.tryEntries[0],e=t.completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var i=this;function r(n,r){return s.type="throw",s.arg=t,i.next=n,r&&(i.method="next",i.arg=e),!!r}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],s=a.completion;if("root"===a.tryLoc)return r("end");if(a.tryLoc<=this.prev){var l=n.call(a,"catchLoc"),c=n.call(a,"finallyLoc");if(l&&c){if(this.prev<a.catchLoc)return r(a.catchLoc,!0);if(this.prev<a.finallyLoc)return r(a.finallyLoc)}else if(l){if(this.prev<a.catchLoc)return r(a.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return r(a.finallyLoc)}}}},abrupt:function(t,e){for(var i=this.tryEntries.length-1;i>=0;--i){var r=this.tryEntries[i];if(r.tryLoc<=this.prev&&n.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var o=r;break}}o&&("break"===t||"continue"===t)&&o.tryLoc<=e&&e<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=t,a.arg=e,o?(this.method="next",this.next=o.finallyLoc,f):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),f},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var i=this.tryEntries[e];if(i.finallyLoc===t)return this.complete(i.completion,i.afterLoc),$(i),f}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var i=this.tryEntries[e];if(i.tryLoc===t){var n=i.completion;if("throw"===n.type){var r=n.arg;$(i)}return r}}throw new Error("illegal catch attempt")},delegateYield:function(t,i,n){return this.delegate={iterator:E(t),resultName:i,nextLoc:n},"next"===this.method&&(this.arg=e),f}},t}(t.exports);try{regeneratorRuntime=n}catch(r){Function("r","regeneratorRuntime = r")(n)}},a3c6:function(t,e,i){},ae87:function(t,e,i){"use strict";var n=i("a3c6"),r=i.n(n);r.a},b287:function(t,e,i){"use strict";var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[t.edit?i("v-container",[t._t("form")],2):i("div",[i("v-row",{attrs:{dense:""}},[i("v-col",{staticClass:"font-weight-bold",attrs:{cols:t.$store.state.cols.header}},[t._t("header")],2),t.loading?i("v-col",{attrs:{cols:t.$store.state.cols.content}},[i("v-progress-linear",{attrs:{indeterminate:"",color:"primary"}})],1):i("v-col",{attrs:{cols:t.$store.state.cols.content}},[t._t("value")],2)],1),i("v-divider")],1)],1)},r=[],o={name:"ihris-element",props:["edit","loading"]},a=o,s=i("2877"),l=i("6544"),c=i.n(l),u=i("62ad"),d=i("a523"),h=i("ce7e"),p=i("8e36"),f=i("0fd9"),v=Object(s["a"])(a,n,r,!1,null,null,null);e["a"]=v.exports;c()(v,{VCol:u["a"],VContainer:d["a"],VDivider:h["a"],VProgressLinear:p["a"],VRow:f["a"]})},c408:function(t,e,i){"use strict";i.r(e);var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("ihris-complex-card",{attrs:{complexField:t.field,slotProps:t.slotProps,label:t.label,errors:t.errors},scopedSlots:t._u([{key:"default",fn:function(e){return[t._t("default",null,{source:e.source})]}}],null,!0)})},r=[],o=i("fa57"),a={name:"fhir-identifier",props:["field","slotProps","sliceName","min","max","base-min","base-max","label","path","edit","constraints"],data:function(){return{errors:[]}},components:{IhrisComplexCard:o["a"]}},s=a,l=i("2877"),c=Object(l["a"])(s,n,r,!1,null,null,null);e["default"]=c.exports},e07f:function(t,e,i){"use strict";i.r(e);var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return t.edit&&t.secondary?t._e():i("div",{staticClass:"ihris-section",attrs:{id:"section-"+t.name}},[i("v-card",{staticClass:"mx-auto",attrs:{"max-width":"700",outlined:""}},[i("v-card-title",{staticClass:" justify-center text-uppercase font-weight-bold"},[t._v(t._s(t.$t("App.ihris-section."+t.title))+" ")]),"language"!==t.name?i("v-card-text",{staticClass:"my-3"},[t._t("default",null,{source:t.slotProps.source})],2):t._e(),"language"===t.name?i("v-card-text",{staticClass:"my-3"},[i("language-detail")],1):t._e()],1)],1)},r=[],o=function(){var t=this,e=this,i=e.$createElement,n=e._self._c||i;return n("v-container",[n("v-row",{attrs:{justify:"center"}},[n("v-dialog",{attrs:{persistent:"","max-width":"680px"},model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[n("v-card",{staticClass:"px-6 py-4"},[n("v-card-title",{staticClass:"justify-center"},[n("span",{staticClass:"text-h6"},[n("v-icon",{staticClass:"mr-2",attrs:{large:"",color:"primary"}},[e._v("mdi-translate")]),e._v("Add New Language")],1)]),n("v-card-text",[n("v-container",[n("v-row",[n("v-col",{attrs:{cols:"12"}},[n("v-autocomplete",{attrs:{dense:"",items:e.languageList,label:"Language",filter:e.customFilter,required:"",outlined:"","item-text":"display","return-object":""},scopedSlots:e._u([{key:"item",fn:function(t){return["object"===typeof t.item?[n("v-list-item-content",{domProps:{textContent:e._s(t.item.display)}})]:e._e()]}}]),model:{value:e.selectedLanguage,callback:function(t){e.selectedLanguage=t},expression:"selectedLanguage"}})],1),e._l(e.proficiencyInput,(function(t,i){return n("v-row",{key:i,staticClass:"mx-2"},[n("v-col",{attrs:{cols:"5"}},[n("v-autocomplete",{attrs:{dense:"",label:"proficiency Type",items:e.proficiencyType,outlined:"","item-text":"display","return-object":""},scopedSlots:e._u([{key:"item",fn:function(t){return["object"===typeof t.item?[n("v-list-item-content",{domProps:{textContent:e._s(t.item.display)}})]:e._e()]}}],null,!0),model:{value:t.extension[1].valueCoding,callback:function(i){e.$set(t.extension[1],"valueCoding",i)},expression:"proficiencyData.extension[1].valueCoding"}})],1),n("v-col",{attrs:{cols:"5"}},[n("v-autocomplete",{attrs:{dense:"",items:e.proficiency,label:"Proficiency",outlined:"","item-text":"display","return-object":""},scopedSlots:e._u([{key:"item",fn:function(t){return["object"===typeof t.item?[n("v-list-item-content",{domProps:{textContent:e._s(t.item.display)}})]:e._e()]}}],null,!0),model:{value:t.extension[0].valueCoding,callback:function(i){e.$set(t.extension[0],"valueCoding",i)},expression:"proficiencyData.extension[0].valueCoding"}})],1),i===e.proficiencyInput.length-1?n("v-cols",{attrs:{cols:"2"}},[n("v-row",{staticClass:"mt-4 ml-2"},[n("v-btn",{attrs:{rounded:"",small:"",icon:"",flat:"",color:"primary",disabled:e.proficiencyInput.length>=4},on:{click:e.addProficiency}},[n("v-icon",{attrs:{left:""}},[e._v(" mdi-plus-circle ")])],1),n("v-btn",{attrs:{rounded:"",small:"",icon:"",flat:"",color:"primary",disabled:e.proficiencyInput.length<=1},on:{click:function(t){return e.reSet()}}},[n("v-icon",{attrs:{left:""}},[e._v(" mdi-backup-restore ")])],1)],1)],1):e._e()],1)}))],2)],1)],1),n("v-card-actions",[n("v-spacer"),n("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:function(){e.dialog=!1,e.reSet()}}},[e._v(" Close ")]),n("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:e.onSave}},[e._v(" Save ")])],1)],1)],1)],1),n("v-row",{attrs:{justify:"center"}},[n("v-dialog",{attrs:{persistent:"","max-width":"680px"},model:{value:e.editDialog,callback:function(t){e.editDialog=t},expression:"editDialog"}},[n("v-card",{staticClass:"px-6 py-4"},[n("v-card-title",{staticClass:"justify-center"},[n("span",{staticClass:"text-h6"},[n("v-icon",{staticClass:"mr-2",attrs:{large:"",color:"primary"}},[e._v("mdi-translate")]),e._v("Select and Edit Language")],1)]),n("v-card-text",[n("v-container",[n("v-row",[n("v-col",{attrs:{cols:"12"}},[n("v-autocomplete",{attrs:{dense:"",items:e.allAvailableLanguages.map((function(t){return t.coding[0]})),label:"select the Language to edit",filter:e.customFilter,required:"",outlined:"","item-text":"display","return-object":""},scopedSlots:e._u([{key:"item",fn:function(t){return["object"===typeof t.item?[n("v-list-item-content",{domProps:{textContent:e._s(t.item.display)}})]:e._e()]}}]),model:{value:e.selectedLanguageToEdit,callback:function(t){e.selectedLanguageToEdit=t},expression:"selectedLanguageToEdit"}})],1),e._l(e.proficiencySelected,(function(t,i){return n("v-row",{key:i,staticClass:"mx-2"},[n("v-col",{attrs:{cols:"5"}},[n("v-autocomplete",{attrs:{dense:"",label:"proficiency Type",items:e.proficiencyType,outlined:"","item-text":"display","return-object":""},scopedSlots:e._u([{key:"item",fn:function(t){return["object"===typeof t.item?[n("v-list-item-content",{domProps:{textContent:e._s(t.item.display)}})]:e._e()]}}],null,!0),model:{value:t.extension[1].valueCoding,callback:function(i){e.$set(t.extension[1],"valueCoding",i)},expression:"proficiencyData.extension[1].valueCoding"}})],1),n("v-col",{attrs:{cols:"5"}},[n("v-autocomplete",{attrs:{dense:"",items:e.proficiency,label:"Proficiency",outlined:"","item-text":"display","return-object":""},scopedSlots:e._u([{key:"item",fn:function(t){return["object"===typeof t.item?[n("v-list-item-content",{domProps:{textContent:e._s(t.item.display)}})]:e._e()]}}],null,!0),model:{value:t.extension[0].valueCoding,callback:function(i){e.$set(t.extension[0],"valueCoding",i)},expression:"proficiencyData.extension[0].valueCoding"}})],1),i===e.proficiencySelected.length-1?n("v-cols",{attrs:{cols:"2"}},[n("v-row",{staticClass:"mt-4 ml-2"},[n("v-btn",{attrs:{rounded:"",small:"",icon:"",flat:"",color:"primary",disabled:e.proficiencySelected.length>=6},on:{click:e.addProficiencySelected}},[n("v-icon",{attrs:{left:""}},[e._v(" mdi-plus-circle ")])],1),n("v-btn",{attrs:{rounded:"",small:"",icon:"",flat:"",color:"primary",disabled:e.proficiencySelected.length<=1},on:{click:function(t){return e.reSet()}}},[n("v-icon",{attrs:{left:""}},[e._v(" mdi-backup-restore ")])],1)],1)],1):e._e()],1)}))],2)],1)],1),n("v-card-actions",[n("v-spacer"),n("v-btn",{attrs:{color:"warning",error:""},on:{click:function(){e.editDialog=!1}}},[n("v-icon",{attrs:{left:""}},[e._v("mdi-close-box-multiple")]),e._v(" Close ")],1),n("v-btn",{attrs:{color:"primary"},on:{click:e.onUpdate}},[n("v-icon",{attrs:{left:""}},[e._v("mdi-content-save-check-outline")]),e._v(" Save ")],1)],1)],1)],1)],1),n("v-card",[n("v-row",{staticClass:"ma-2 pt-3",attrs:{justify:"end"}},[[n("v-btn",{staticClass:"mr-3",attrs:{color:"primary"},on:{click:function(){t.dialog=!0,t.skillCount=1}}},[n("v-icon",{attrs:{left:""}},[e._v(" mdi-plus-circle ")]),e._v(" Add Language ")],1),n("v-btn",{attrs:{color:"primary",disabled:0===e.tableData.length},on:{click:function(){t.editDialog=!0}}},[n("v-icon",{attrs:{left:""}},[e._v(" mdi-circle-edit-outline ")]),e._v(" Edit Language ")],1)]],2),n("v-card-text",[e.tableData.length>0?n("v-simple-table",{scopedSlots:e._u([{key:"default",fn:function(){return[n("thead",[n("tr",[n("th",{staticClass:"text-left"},[e._v(" Language ")]),n("th",{staticClass:"text-left"},[e._v(" Skill ")]),n("th",{staticClass:"text-left"},[e._v(" Excellent ")]),n("th",{staticClass:"text-left"},[e._v(" Good ")]),n("th",{staticClass:"text-left"},[e._v(" Fair ")]),n("th",{staticClass:"text-left"},[e._v(" Poor ")])])]),e._l(e.tableData,(function(t){return n("tbody",{key:t.name},[n("tr",[n("th",{attrs:{rowspan:"6",scope:"rowgroup"}},[e._v(e._s(t.name))]),n("th",{attrs:{scope:"row"}},[e._v("Expressed signed")]),e._l([0,1,2,3],(function(i){return n("td",{key:i},e._l([0,1,2,3,4,5],(function(r){return n("span",{key:r},[t.skills[r]&&"Expressed signed"===t.skills[r].type&&t.skills[r].level===e.level[i]?n("v-icon",{attrs:{color:"green"}},[e._v("mdi-checkbox-marked-circle-outline")]):n("v-icon")],1)})),0)}))],2),n("tr",[n("th",{attrs:{scope:"row"}},[e._v("Expressed spoken")]),e._l([0,1,2,3],(function(i){return n("td",{key:i},e._l([0,1,2,3,4,5],(function(r){return n("span",{key:r},[t.skills[r]&&"Expressed spoken"===t.skills[r].type&&t.skills[r].level===e.level[i]?n("v-icon",{attrs:{color:"green"}},[e._v("mdi-checkbox-marked-circle-outline")]):n("v-icon")],1)})),0)}))],2),n("tr",[n("th",{attrs:{scope:"row"}},[e._v("Expressed written")]),e._l([0,1,2,3],(function(i){return n("td",{key:i},e._l([0,1,2,3,4,5],(function(r){return n("span",{key:r},[t.skills[r]&&"Expressed written"===t.skills[r].type&&t.skills[r].level===e.level[i]?n("v-icon",{attrs:{color:"green"}},[e._v("mdi-checkbox-marked-circle-outline")]):n("v-icon")],1)})),0)}))],2),n("tr",[n("th",{attrs:{scope:"row"}},[e._v("Received signed")]),e._l([0,1,2,3],(function(i){return n("td",{key:i},e._l([0,1,2,3,4,5],(function(r){return n("span",{key:r},[t.skills[r]&&"Received signed"===t.skills[r].type&&t.skills[r].level===e.level[i]?n("v-icon",{attrs:{color:"green",div:""}},[e._v("mdi-checkbox-marked-circle-outline")]):n("v-icon")],1)})),0)}))],2),n("tr",[n("th",{attrs:{scope:"row"}},[e._v("Received written")]),e._l([0,1,2,3],(function(i){return n("td",{key:i},e._l([0,1,2,3,4,5],(function(r){return n("span",{key:r},[t.skills[r]&&"Received written"===t.skills[r].type&&t.skills[r].level===e.level[i]?n("v-icon",{attrs:{color:"green",div:""}},[e._v("mdi-checkbox-marked-circle-outline")]):n("v-icon")],1)})),0)}))],2),n("tr",[n("th",{attrs:{scope:"row"}},[e._v("Received spoken")]),e._l([0,1,2,3],(function(i){return n("td",{key:i},e._l([0,1,2,3,4,5],(function(r){return n("span",{key:r},[t.skills[r]&&"Received spoken"===t.skills[r].type&&t.skills[r].level===e.level[i]?n("v-icon",{attrs:{color:"green",div:""}},[e._v("mdi-checkbox-marked-circle-outline")]):n("v-icon")],1)})),0)}))],2),n("tr")])}))]},proxy:!0}],null,!1,1009935552)}):n("v-card-title",{staticClass:"justify-center"},[n("span",{staticClass:"text-h6"},[n("v-icon",{staticClass:"mr-2",attrs:{large:"",color:"primary"}},[e._v("mdi-translate")]),e._v("No language data is available please add one ")],1)])],1)],1)],1)},a=[],s=(i("4de4"),i("7db0"),i("caad"),i("c975"),i("d81d"),i("2532"),i("bc3a")),l=i.n(s),c={name:"languageDetail",data:function(){return{valid:!1,skillCount:1,select:null,dialog:!1,skillsList:["Received signed","Expressed signed","Expressed written","Received written","Expressed spoken","Received spoken"],level:["Excellent","Good","Fair","Poor"],tableData:[],languageList:[],filledLanguage:[],proficiency:[],proficiencyType:[],selectedLanguage:null,selectedProficiency:null,selectedProficiencyType:null,proficiencySelected:[],selected:[],required:function(t){return function(e){return e||"You must select a ".concat(t)}},proficiencyInput:[{url:"http://ihris.org/fhir/StructureDefinition/ihris-practitioner-language-proficiency",extension:[{url:"level",valueCoding:{system:"http://terminology.hl7.org/CodeSystem/v3-LanguageAbilityProficiency",version:"",code:"",display:""}},{url:"type",valueCoding:{system:"http://terminology.hl7.org/CodeSystem/v3-LanguageAbilityMode",version:"",code:"",display:""}}]}],allAvailableLanguages:[],selectedLanguageToEdit:null,editDialog:!1}},watch:{selectedLanguageToEdit:function(t){var e=this.allAvailableLanguages.find((function(e){return e.coding[0].code===t.code}));e.extension?this.proficiencySelected=e.extension:this.proficiencySelected=[{url:"http://ihris.org/fhir/StructureDefinition/ihris-practitioner-language-proficiency",extension:[{url:"level",valueCoding:""},{url:"type",valueCoding:""}]}]}},methods:{reSet:function(){this.proficiencyInput=[{url:"http://ihris.org/fhir/StructureDefinition/ihris-practitioner-language-proficiency",extension:[{url:"level",valueCoding:{system:"http://terminology.hl7.org/CodeSystem/v3-LanguageAbilityProficiency",version:"",code:"",display:""}},{url:"type",valueCoding:{system:"http://terminology.hl7.org/CodeSystem/v3-LanguageAbilityMode",version:"",code:"",display:""}}]}]},addProficiency:function(){this.proficiencyInput.push({url:"http://ihris.org/fhir/StructureDefinition/ihris-practitioner-language-proficiency",extension:[{url:"level",valueCoding:""},{url:"type",valueCoding:""}]})},addProficiencySelected:function(){this.proficiencySelected.push({url:"http://ihris.org/fhir/StructureDefinition/ihris-practitioner-language-proficiency",extension:[{url:"level",valueCoding:""},{url:"type",valueCoding:""}]})},customFilter:function(t,e){var i=t.display.toLowerCase(),n=e.toLowerCase();return i.indexOf(n)>-1},onSave:function(){var t=this;this.dialog=!1,l.a.get("/fhir/Practitioner/".concat(this.$router.history.current.params.id)).then((function(e){var i=e.data;void 0===i.communication&&(i.communication=[]),i.communication.push({extension:t.proficiencyInput,coding:[t.selectedLanguage]}),l.a.put("/fhir/Practitioner/".concat(t.$router.history.current.params.id),i).then((function(){t.$router.go()})).catch((function(t){console.log("error",t)}))})).catch((function(t){return console.log(t)}))},onUpdate:function(){var t=this;this.editDialog=!1,l.a.get("/fhir/Practitioner/".concat(this.$router.history.current.params.id)).then((function(e){var i=e.data;i.communication.find((function(e){return e.coding[0].code===t.selectedLanguageToEdit.code})).extension=t.proficiencySelected,l.a.put("/fhir/Practitioner/".concat(t.$router.history.current.params.id),i).then((function(){t.$router.go()})).catch((function(t){console.log("error",t)}))})).catch((function(t){return console.log(t)}))}},created:function(){var t=this;l.a.get("/fhir/Practitioner/".concat(this.$router.history.current.params.id)).then((function(e){e.data&&e.data.communication&&(t.allAvailableLanguages=e.data.communication,e.data.communication.map((function(e){if(e.coding[0].code){t.filledLanguage.push(e.coding[0].code);var i=[];e.extension&&e.extension.length>0&&e.extension.map((function(t){var e={};t.extension&&t.extension[0]&&t.extension[1]&&(e.level=t.extension[0].valueCoding.display,e.type=t.extension[1].valueCoding.display,i.push(e))}));var n={};n.skills=i,n.name=e.coding[0].display,n.skillList=t.skillsList,t.tableData.push(n)}})))})),l.a.get("/fhir/ValueSet/languages/$expand").then((function(e){t.languageList=e.data.expansion.contains,t.languageList=t.languageList.filter((function(e){return!t.filledLanguage.includes(e.code)})),t.languageList.sort((function(t,e){return t.display>e.display?1:e.display>t.display?-1:0}))})),l.a.get("/fhir/ValueSet/v3-LanguageAbilityMode/$expand").then((function(e){return t.proficiencyType=e.data.expansion.contains})).catch((function(t){return console.log(t)})),l.a.get("/fhir/ValueSet/v3-LanguageAbilityProficiency/$expand").then((function(e){return t.proficiency=e.data.expansion.contains})).catch((function(t){return console.log(t)}))}},u=c,d=(i("ae87"),i("2877")),h=i("6544"),p=i.n(h),f=i("c6a6"),v=i("8336"),m=i("b0af"),g=i("99d9"),y=i("62ad"),b=i("a523"),x=i("169a"),_=i("132d"),k=i("5d23"),w=i("0fd9"),C=i("1f4f"),P=i("2fa4"),L=Object(d["a"])(u,o,a,!1,null,"6b049f1c",null),$=L.exports;p()(L,{VAutocomplete:f["a"],VBtn:v["a"],VCard:m["a"],VCardActions:g["a"],VCardText:g["c"],VCardTitle:g["d"],VCol:y["a"],VContainer:b["a"],VDialog:x["a"],VIcon:_["a"],VListItemContent:k["a"],VRow:w["a"],VSimpleTable:C["a"],VSpacer:P["a"]});var S={name:"ihris-section",props:["name","slotProps","title","description","edit","secondary"],components:{"language-detail":$},data:function(){return{}},created:function(){},watch:{},methods:{}},E=S,I=Object(d["a"])(E,n,r,!1,null,null,null);e["default"]=I.exports;p()(I,{VCard:m["a"],VCardText:g["c"],VCardTitle:g["d"]})},e96c:function(t,e,i){"use strict";var n=i("3d3d"),r=i.n(n);r.a},eb7d:function(t,e,i){},eee9:function(t,e,i){"use strict";i.r(e);var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("ihris-element",{attrs:{edit:t.edit,loading:t.loading},scopedSlots:t._u([{key:"form",fn:function(){return[i("v-select",{attrs:{loading:t.loading,label:t.display,items:t.items.filter((function(t){return!t.code.includes("(deactivated)")})),outlined:"","hide-details":"auto","error-messages":t.errors,"item-text":"display","item-value":"code",disabled:t.disabled,rules:t.rules,dense:""},on:{change:function(e){t.errors=[]}},scopedSlots:t._u([{key:"label",fn:function(){return[t._v(t._s(t.$t("App.fhir-coding."+t.label))+" "),t.required?i("span",{staticClass:"red--text font-weight-bold"},[t._v("*")]):t._e()]},proxy:!0}]),model:{value:t.valueCode,callback:function(e){t.valueCode=e},expression:"valueCode"}})]},proxy:!0},{key:"header",fn:function(){return[t._v(" "+t._s(t.$t("App.fhir-coding."+t.display))+" ")]},proxy:!0},{key:"value",fn:function(){return[t._v(" "+t._s(t.valueDisplay||t.value.display||"")+" ")]},proxy:!0}])})},r=[],o=(i("7db0"),i("b287")),a={name:"fhir-coding",props:["field","label","sliceName","targetprofile","min","max","base-min","base-max","slotProps","path","binding","edit","readOnlyIfSet","constraints"],components:{IhrisElement:o["a"]},data:function(){return{value:{system:"",code:"",display:""},valueCode:"",valueDisplay:"",loading:!0,errors:[],items:[],source:{path:"",data:{},binding:this.binding},disabled:!1,lockWatch:!1}},created:function(){this.setupData()},watch:{slotProps:{handler:function(){this.lockWatch||this.setupData()},deep:!0},valueCode:function(t){var e=this;if(this.items){var i=this.items.find((function(e){return e.code===t}));i&&(this.value=i)}this.value.system&&this.value.code&&this.$fhirutils.codeLookup(this.value.system,this.value.code,this.binding||this.source.binding).then((function(t){e.valueDisplay=t}))}},methods:{setupData:function(){var t=this;if(this.slotProps&&this.slotProps.source){if(this.source={path:this.slotProps.source.path+"."+this.field,data:{},binding:this.binding||this.slotProps.source.binding},this.slotProps.source.fromArray)this.source.data=this.slotProps.source.data,this.source.data&&(this.value=this.source.data,this.valueCode=this.value.code,this.lockWatch=!0);else{var e=this.$fhirutils.pathFieldExpression(this.field);this.source.data=this.$fhirpath.evaluate(this.slotProps.source.data,e),this.source.data[0]&&(this.value=this.source.data[0],this.valueCode=this.value.code,this.lockWatch=!0)}this.disabled=this.readOnlyIfSet&&!!this.valueCode}var i=this.binding||this.slotProps.source.binding;this.$fhirutils.expand(i).then((function(e){t.items=e,t.loading=!1})).catch((function(e){console.log(e),t.errors=e.message,t.loading=!1}))}},computed:{index:function(){return this.slotProps&&this.slotProps.input?this.slotProps.input.index:void 0},display:function(){return this.slotProps&&this.slotProps.input?this.slotProps.input.label:this.label},required:function(){return(this.index||0)<this.min},rules:function(){var t=this;return this.required?[function(e){return!!e||t.display+" is required"}]:[]}}},s=a,l=i("2877"),c=i("6544"),u=i.n(c),d=i("b974"),h=Object(l["a"])(s,n,r,!1,null,null,null);e["default"]=h.exports;u()(h,{VSelect:d["a"]})},fa57:function(t,e,i){"use strict";var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-card",[i("v-card-subtitle",{staticClass:"primary--text text-uppercase font-weight-bold"},[t._v(t._s(t.$t("App.ihris-complex-card."+t.display)))]),t._l(t.errors,(function(e,n){return i("v-card-text",{key:n,staticClass:"error white--text font-weight-bold"},[t._v(t._s(e))])})),i("v-card-text",[t._t("default",null,{source:t.source})],2)],2)},r=[],o={name:"ihris-complex-card",props:["complexField","slotProps","label","errors"],data:function(){return{source:{path:"",data:{}}}},created:function(){this.setupData()},watch:{slotProps:{handler:function(){this.setupData()},deep:!0}},methods:{setupData:function(){if(this.slotProps&&this.slotProps.source)if(this.source={path:this.slotProps.source.path+"."+this.complexField,data:{}},this.slotProps.source.fromArray)this.source.data=this.slotProps.source.data;else{var t=this.$fhirutils.pathFieldExpression(this.complexField);this.source.data=this.$fhirpath.evaluate(this.slotProps.source.data,t)}}},computed:{display:function(){return this.slotProps&&this.slotProps.input?this.slotProps.input.label:this.label}}},a=o,s=i("2877"),l=i("6544"),c=i.n(l),u=i("b0af"),d=i("99d9"),h=Object(s["a"])(a,n,r,!1,null,null,null);e["a"]=h.exports;c()(h,{VCard:u["a"],VCardSubtitle:d["b"],VCardText:d["c"]})}}]);
//# sourceMappingURL=fhir-primary.af362561.js.map